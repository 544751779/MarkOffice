(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210a2f"],{b979:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commonbox userwrap"},[a("div",{staticClass:"userleft"},[a("div",{staticClass:"tabletop clearfix"},[a("div",{staticClass:"search userset clearfix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectItem.txt,expression:"selectItem.txt "}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入姓名"},domProps:{value:t.selectItem.txt},on:{input:function(e){e.target.composing||t.$set(t.selectItem,"txt",e.target.value)}}}),a("a",{staticClass:"btn",on:{click:function(e){t.init()}}},[t._v("搜索")])])]),a("div",{staticClass:"tablecommondiv"},[a("table",{staticClass:"tablecommon table-account"},[t._m(0),a("tbody",t._l(t.list,function(e,s){return a("tr",{key:s,class:e.id==t.RowData.id?"current":""},[a("td",[t._v(t._s(e.username))]),a("td",[t._v(t._s(e.user_name))]),a("td",[t._v(t._s(e.role_name))]),a("td",[0==e.status?a("i",{staticClass:"text-icon icc-ok"}):t._e()]),a("td",[0==e.num_refer?a("a",{staticClass:"alink",on:{click:function(a){t.del(e)}}},[t._v("删除")]):t._e(),0==e.num_refer?a("a",{staticClass:"alink",on:{click:function(a){t.editShow(e)}}},[t._v("编辑")]):t._e(),0==e.status?a("a",{staticClass:"alink",on:{click:function(a){t.set_status(e,1)}}},[t._v("禁用")]):t._e(),1==e.status?a("a",{staticClass:"alink",on:{click:function(a){t.set_status(e,0)}}},[t._v("启用")]):t._e(),e.id==t.RowData.id?a("span",{staticClass:"arrow"}):t._e()])])}),0)]),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"btns",on:{click:t.addShow}},[a("a",{staticClass:"btn",attrs:{target:"_blank"}},[t._v("新增一条")])]),a("div",{staticClass:"pagewrap"},[a("Page",{attrs:{total:t.listCount,"show-sizer":"","page-size":t.pagination.pagerow,"show-total":"","show-elevator":"",current:t.pagination.pageno},on:{"update:pageSize":function(e){t.$set(t.pagination,"pagerow",e)},"update:current":function(e){t.$set(t.pagination,"pageno",e)},"on-change":t.init,"on-page-size-change":t.pageSizeChange}})],1)])])]),a("div",{staticClass:"userright"},[a("div",{staticClass:"useredit-area"},[a("h4",[t._v("用户添加")]),a("ul",[a("li",[a("label",[t._v("登录名：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.RowData.username,expression:"RowData.username"}],staticClass:"formtxt",attrs:{type:"text",disabled:t.isEdit},domProps:{value:t.RowData.username},on:{input:function(e){e.target.composing||t.$set(t.RowData,"username",e.target.value)}}})]),a("li",[a("label",[t._v("姓名：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.RowData.user_name,expression:"RowData.user_name"}],staticClass:"formtxt",attrs:{type:"text"},domProps:{value:t.RowData.user_name},on:{input:function(e){e.target.composing||t.$set(t.RowData,"user_name",e.target.value)}}})]),a("li",[a("label",[t._v("密码：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.RowData.password,expression:"RowData.password"}],staticClass:"formtxt",attrs:{type:"text"},domProps:{value:t.RowData.password},on:{input:function(e){e.target.composing||t.$set(t.RowData,"password",e.target.value)}}})]),a("li",{staticClass:"selectli clearfix"},[a("label",[t._v("角色：")]),a("div",{staticClass:"select select-role"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.RowData.role,expression:"RowData.role"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.RowData,"role",e.target.multiple?a:a[0])}}},t._l(t.roleList,function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}),0)])]),a("li",[a("label",[t._v("手机号码：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.RowData.user_mobile,expression:"RowData.user_mobile"}],staticClass:"formtxt",attrs:{type:"text"},domProps:{value:t.RowData.user_mobile},on:{input:function(e){e.target.composing||t.$set(t.RowData,"user_mobile",e.target.value)}}})]),a("li",{staticClass:"selectli clearfix"},[a("label",[t._v("启用状态：")]),a("div",{staticClass:"select select-status"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.RowData.status,expression:"RowData.status"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.RowData,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("启用")]),a("option",{attrs:{value:"1"}},[t._v("禁用")])])])])])]),a("div",{staticClass:"btns"},[t.isAdd||t.isEdit?a("button",{staticClass:"btn btnblue",on:{click:function(e){t.addCancel(),t.editCancel()}}},[t._v("取消")]):t._e(),t.isAdd?a("button",{staticClass:"btn btnred",on:{click:t.addSubmit}},[t._v("保存新增")]):t._e(),t.isEdit?a("button",{staticClass:"btn btnred",on:{click:t.editSubmit}},[t._v("保存修改")]):t._e()])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("登录名")]),a("th",[t._v("姓名")]),a("th",[t._v("角色")]),a("th",[t._v("启用")]),a("th",[t._v("操作")])])])}],r=(a("96cf"),a("3b8d")),i=(a("cadf"),a("551c"),a("097d"),a("494c")),o=new i["a"],u={components:{},data:function(){return{list:[],listCount:0,isAdd:!1,isEdit:!1,roleList:[],RowData:{id:"",role:"",user_name:"",username:"",status:"0",password:"",user_mobile:""},pagination:{pagerow:this.$store.state.pagination.pagerow,pageno:this.$store.state.pagination.pageno},selectItem:{txt:""}}},methods:{init:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.user("select",this.getSelectItem());case 2:e=t.sent,1==e.meta.result?(this.list=e.data,this.listCount=e.meta.total):this.alertError(e.errors[0].abstract_info),this.addCancel(),this.editCancel();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.pagination.pagerow=t,this.init()},set_status:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,a){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("确定要进行该操作吗？")){t.next=14;break}return t.next=3,o.user("set_status",{id:e.id,status:a});case 3:if(s=t.sent,0!=s.meta.result){t.next=10;break}return this.alertError(s.errors[0].code+" : "+s.errors[0].abstract_info),t.next=8,this.init();case 8:t.next=14;break;case 10:return t.next=12,this.init();case 12:this.addCancel(),this.editCancel();case 14:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),getSelectItem:function(){return{pageno:this.pagination.pageno,pagerow:this.pagination.pagerow,role:-1,status:-1,txt:this.selectItem.txt}},clearRowData:function(){this.RowData={id:"",role:"",user_name:"",username:"",status:"0",password:"",user_mobile:""}},addShow:function(){this.editCancel(),this.clearRowData(),this.isAdd=!0},editShow:function(t){this.addCancel(),this.isEdit=!0,this.RowData={id:t.id,role:t.role,user_name:t.user_name,username:t.username,status:t.status,password:"",user_mobile:t.user_mobile}},addCancel:function(){this.clearRowData(),this.isAdd=!1},editCancel:function(){this.clearRowData(),this.isAdd=!1,this.isEdit=!1},transformRequest:function(t){var e=this.RowData,a=0;return"add"==t&&delete e.id,e.user_name||(this.$Message.info("名称不能为空"),a++),e.username||(this.$Message.info("登录名不能为空"),a++),e.role||(this.$Message.info("请选择角色"),a++),!(a>0)&&e},submit:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.transformRequest(e),a){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,o.user(e,a);case 5:if(s=t.sent,0!=s.meta.result){t.next=12;break}return this.alertError(s.errors[0].code+" : "+s.errors[0].abstract_info),t.next=10,this.init();case 10:t.next=16;break;case 12:return t.next=14,this.init();case 14:this.addCancel(),this.editCancel();case 16:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),addSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.submit("add");case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),editSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.submit("edit");case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),del:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!window.confirm("确定要删除该条纪录吗？")){t.next=6;break}return t.next=3,o.user("del",{id:e.id});case 3:a=t.sent,0==a.meta.result&&this.alertError(a.errors[0].code+" : "+a.errors[0].abstract_info),this.init();case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.init(),t.next=3,o.role("select",{name:"",status:-1});case 3:e=t.sent,this.roleList=e.data;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},c=u,l=a("2877"),d=Object(l["a"])(c,s,n,!1,null,null,null);d.options.__file="user.vue";e["default"]=d.exports}}]);