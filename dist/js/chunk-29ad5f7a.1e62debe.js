(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29ad5f7a"],{"0a90":function(t,e,a){var n=a("63b6"),o=a("10ff");n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},"10ff":function(t,e,a){var n=a("e53d").parseFloat,o=a("a1ce").trim;t.exports=1/n(a("e692")+"-0")!==-1/0?function(t){var e=o(String(t),3),a=n(e);return 0===a&&"-"==e.charAt(0)?-0:a}:n},"59ad":function(t,e,a){t.exports=a("7be7")},"7be7":function(t,e,a){a("0a90"),t.exports=a("584a").parseFloat},"881e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix",attrs:{id:"main"}},[a("div",{staticClass:"containarea"},[a("h2",{staticClass:"commontit"},[t._v(t._s(t.$store.state.pageInfo.crumbName))]),a("div",{staticClass:"container"},[a("div",{staticClass:"tabletop clearfix"},[a("div",{staticClass:"search paymag clearfix"},[a("div",{staticClass:"checkbox"},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.selectItem.commission_status,callback:function(e){t.$set(t.selectItem,"commission_status",e)},expression:"selectItem.commission_status"}},[t._v("佣金")])],1),a("div",{staticClass:"daterange"},[a("DatePicker",{attrs:{"split-panels":"",value:[t.selectItem.pay_time_start,t.selectItem.pay_time_end],type:"daterange",placeholder:"选择日期"},on:{"on-change":t.dateChange}})],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectItem.payee_name,expression:" selectItem.payee_name   "}],staticClass:"formtxt w5",attrs:{type:"text",placeholder:"输入付款单位"},domProps:{value:t.selectItem.payee_name},on:{input:function(e){e.target.composing||t.$set(t.selectItem,"payee_name",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectItem.project_name,expression:" selectItem.project_name "}],staticClass:"formtxt w5",attrs:{type:"text",placeholder:"输入项目名称"},domProps:{value:t.selectItem.project_name},on:{input:function(e){e.target.composing||t.$set(t.selectItem,"project_name",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectItem.contract_code,expression:" selectItem.contract_code"}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入合同编号"},domProps:{value:t.selectItem.contract_code},on:{input:function(e){e.target.composing||t.$set(t.selectItem,"contract_code",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectItem.invoice_num,expression:" selectItem.invoice_num  "}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入发票编号"},domProps:{value:t.selectItem.invoice_num},on:{input:function(e){e.target.composing||t.$set(t.selectItem,"invoice_num",e.target.value)}}}),a("div",{staticClass:"select select-pay"},[a("Select",{attrs:{placeholder:"选择已付/未付"},model:{value:t.selectItem.pay_status,callback:function(e){t.$set(t.selectItem,"pay_status",e)},expression:"selectItem.pay_status"}},[a("Option",{attrs:{value:-1}},[t._v("请选择")]),a("Option",{attrs:{value:1}},[t._v("已付")]),a("Option",{attrs:{value:0}},[t._v("未付")]),a("Option",{attrs:{value:99}},[t._v("已经付完")])],1)],1),a("div",{staticClass:"select select-ticket"},[a("Select",{attrs:{placeholder:"选择有票/无票"},model:{value:t.selectItem.invoice_status,callback:function(e){t.$set(t.selectItem,"invoice_status",e)},expression:"selectItem.invoice_status"}},[a("Option",{attrs:{value:-1}},[t._v("请选择")]),a("Option",{attrs:{value:1}},[t._v("有")]),a("Option",{attrs:{value:0}},[t._v("没有")])],1)],1),a("a",{staticClass:"btn",on:{click:function(e){t.init()}}},[t._v("搜索")])])]),a("div",{staticClass:"tablecommondiv"},[a("table",{staticClass:"tablecommon table-paymanage"},[t._m(0),a("tbody",t._l(t.list,function(e,n){return a("tr",{key:n},[a("td",[a("a",{on:{click:function(a){t.showContractDetail(e.contract_id)}}},[t._v(t._s(e.contract_code))])]),a("td",[a("a",{on:{click:function(a){t.showPaymentDetail(e.contract_id)}}},[t._v("详情")])]),a("td",[t._v("上海金诺信息技术有限公司")]),a("td",[t._v(t._s(e.name_payee))]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.service_desc))}}),a("td",[t._v("始："+t._s(t.dataFormat(e.pay_start,"day"))+"\r\n                                "),e.pay_end<4070914352e3?[a("br"),t._v("止："+t._s(t.dataFormat(e.pay_end,"day"))+"\r\n                                ")]:t._e()],2),a("td",[t._v(t._s(e.amount))]),t._l(t.dic.pay_type,function(n,o){return n.id==e.pay_type?a("td",{key:o,domProps:{innerHTML:t._s(n.name)}}):t._e()}),a("td",[t._v(t._s(e.amount_invoice))]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.invoice_nums,"fp"))}}),a("td",[t._v(" "+t._s(e.amount_payed)+" ")]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.pay_dates,"pay_dates"))}}),a("td",["1"==e.action_apply?a("a",{staticClass:"alink",on:{click:function(a){t.payment_add(e.id)}}},[t._v("付款申请")]):t._e(),"1"==e.action_regist?a("a",{staticClass:"alink",on:{click:function(a){t.payment_regist(e.id)}}},[t._v("付款登记 ")]):t._e()]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.voucher_comment,"bz"))}})],2)}),0)])]),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"pagewrap"},[a("Page",{attrs:{total:t.listCount,"show-sizer":"","page-size":t.pagination.pagerow,"show-total":"","show-elevator":"",current:t.pagination.pageno},on:{"update:pageSize":function(e){t.$set(t.pagination,"pagerow",e)},"update:current":function(e){t.$set(t.pagination,"pageno",e)},"on-change":t.init,"on-page-size-change":t.pageSizeChange}})],1)])])]),a("contractDetail",{attrs:{isShowModal:t.contract_detail.show,map:t.contract_detail.map},on:{emitComponents:t.emitComponents}}),a("paymentDetail",{attrs:{isShowModal:t.payment_detail.show,map:t.payment_detail.map},on:{emitComponents:t.emitComponents}}),a("paymentRegist",{attrs:{isShowModal:t.payment_regist_par.show,map:t.payment_regist_par.map},on:{emitComponents:t.emitComponents}}),a("paymentAdd",{attrs:{isShowModal:t.payment_add_par.show,map:t.payment_add_par.map},on:{emitComponents:t.emitComponents}})],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("合同编号")]),a("th",[t._v("项目收款")]),a("th",[t._v("申请单位")]),a("th",[t._v("付款单位")]),a("th",[t._v("采购/服务内容")]),a("th",[t._v("计费日期")]),a("th",[t._v("应付金额")]),a("th",[t._v("付款方式")]),a("th",[t._v("发票金额")]),a("th",[t._v("发票号")]),a("th",[t._v("实付金额")]),a("th",[t._v("付款日期")]),a("th",[t._v("经办")]),a("th",[t._v("备注/付款凭证")])])])}],i=(a("7f7f"),a("96cf"),a("3b8d")),s=(a("cadf"),a("551c"),a("097d"),a("494c")),r=a("a0df"),c=a("f570"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"付款登记",width:380,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(e){t.isShowModal_=e},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-payregister"},[a("div",{staticClass:"formlist"},[a("ul",{staticClass:"clearfix"},[a("li",[a("label",[t._v("付款金额：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.amount,expression:"row.amount"}],attrs:{type:"text"},domProps:{value:t.row.amount},on:{input:function(e){e.target.composing||t.$set(t.row,"amount",e.target.value)}}})]),a("li",[a("label",[t._v("付款日期：")]),a("div",{staticClass:"date datepay"},[a("DatePicker",{attrs:{type:"date",placeholder:"选择付款日期",format:"yyyy-MM-dd"},on:{"on-change":function(e){return t.row.pay_date=e}}})],1)]),a("li",[a("label",[t._v("付款凭证：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.pay_voucher,expression:"row.pay_voucher"}],attrs:{type:"text"},domProps:{value:t.row.pay_voucher},on:{input:function(e){e.target.composing||t.$set(t.row,"pay_voucher",e.target.value)}}})]),a("li",[a("label",[t._v("发票号码：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.invoice_num,expression:"row.invoice_num"}],attrs:{type:"text"},domProps:{value:t.row.invoice_num},on:{input:function(e){e.target.composing||t.$set(t.row,"invoice_num",e.target.value)}}})]),a("li",[a("label",[t._v("发票金额：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.invoice_amount,expression:"row.invoice_amount"}],attrs:{type:"text"},domProps:{value:t.row.invoice_amount},on:{input:function(e){e.target.composing||t.$set(t.row,"invoice_amount",e.target.value)}}})]),a("li",[a("label",[t._v("备注：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.comments,expression:"row.comments"}],attrs:{type:"text"},domProps:{value:t.row.comments},on:{input:function(e){e.target.composing||t.$set(t.row,"comments",e.target.value)}}})]),a("li",[a("div",{staticClass:"checkbox"},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.row.pay_status,callback:function(e){t.$set(t.row,"pay_status",e)},expression:"row.pay_status"}},[t._v("本计费周期款项已结清")])],1)])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])},p=[],m=new s["a"],_={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,row:{amount:"",comments:"",id_payment:"",invoice_amount:"",invoice_num:"",pay_date:"",pay_voucher:"",pay_status:"0"}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"payment_regist"})},init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.row={amount:"",comments:"",id_payment:"",invoice_amount:"",invoice_num:"",pay_date:"",pay_voucher:"",pay_status:"0"};case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),transformRequest:function(){return this.row.amount?this.row.invoice_amount?this.row.invoice_num?this.row.pay_date?this.row.pay_voucher?this.row:(this.$Message.info("支付凭证不能为空"),!1):(this.$Message.info("支付日期不能为空"),!1):(this.$Message.info("发票编号不能为空"),!1):(this.$Message.info("发票金额不能为空"),!1):(this.$Message.info("付款金额不能为空"),!1)},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.transformRequest(),!e){t.next=7;break}return e.id_payment=this.map.id,t.next=5,m.payment("regist",e);case 5:a=t.sent,1==a.meta.result?(this.$Message.info("操作成功"),this.init(),this.cancel()):this.alertError(a.errors[0].abstract_info);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(t,e){this.init()},deep:!0}}},u=_,d=a("2877"),h=Object(d["a"])(u,l,p,!1,null,null,null);h.options.__file="payment_regist.vue";var v=h.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"",width:880,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(e){t.isShowModal_=e},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-payapplication"},[a("h2",[t._v("付款申请单")]),a("div",{staticClass:"tableblacktop clearfix"},[a("div",{staticClass:"leftdate"},[a("label",[t._v("申请日期：")]),a("span",[t._v("\r\n                    "+t._s(t.row.apply_date)+"\r\n                    ")])]),a("div",{staticClass:"rightnum"},[a("label",[t._v("合同编号：")]),a("span",[t._v("\r\n                     "+t._s(t.row.contract_code)+"\r\n                    ")])])]),a("div",{staticClass:"tableblack"},[a("table",[a("tbody",[a("tr",[a("th",[t._v("收款单位")]),a("td",{attrs:{colspan:"9"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.payee_name,expression:"row.payee_name"}],attrs:{type:"text",placeholder:"收款单位"},domProps:{value:t.row.payee_name},on:{input:function(e){e.target.composing||t.$set(t.row,"payee_name",e.target.value)}}})])]),a("tr",[a("th",[t._v("开户银行")]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.bank_name,expression:"row.bank_name"}],attrs:{type:"text",placeholder:"开户银行"},domProps:{value:t.row.bank_name},on:{input:function(e){e.target.composing||t.$set(t.row,"bank_name",e.target.value)}}})]),a("th",[t._v("银行账号")]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.bank_acct,expression:"row.bank_acct"}],attrs:{type:"text",placeholder:"银行账号"},domProps:{value:t.row.bank_acct},on:{input:function(e){e.target.composing||t.$set(t.row,"bank_acct",e.target.value)}}})])]),a("tr",[a("th",[t._v("金额")]),a("td",{attrs:{colspan:"9"}},[a("span",{staticClass:"tit"},[t._v("小写")]),a("p",{staticClass:"money02"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.amount,expression:"row.amount"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.row.amount},on:{input:function(e){e.target.composing||t.$set(t.row,"amount",e.target.value)}}})]),a("span",{staticClass:"tit"},[t._v("人民币大写：")]),a("p",{staticClass:"money01"},[t._v(t._s(t.view.rmb_x))])])]),a("tr",[a("th",[t._v("用途")]),a("td",{attrs:{colspan:"7"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.apply_usage,expression:"row.apply_usage"}],attrs:{type:"text"},domProps:{value:t.row.apply_usage},on:{input:function(e){e.target.composing||t.$set(t.row,"apply_usage",e.target.value)}}})]),a("th",[t._v("经办人")]),a("td",[t._v("\r\n                            "+t._s(t.row.apply_user_name)+"\r\n                            ")])]),a("tr",[a("th",[t._v("发票号码")]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.invoice_num,expression:"row.invoice_num"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.row.invoice_num},on:{input:function(e){e.target.composing||t.$set(t.row,"invoice_num",e.target.value)}}})]),a("th",[t._v("发票金额")]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.invoice_amount,expression:"row.invoice_amount"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.row.invoice_amount},on:{input:function(e){e.target.composing||t.$set(t.row,"invoice_amount",e.target.value)}}})])]),a("tr",[a("th",[t._v("集团"),a("br"),t._v("批准人")]),a("td"),a("th",[t._v("总经理")]),a("td"),a("th",[t._v("财务经理")]),a("td"),a("th",[t._v("财务"),a("br"),t._v("副经理")]),a("td"),a("th",[t._v("部门主管")]),a("td")])])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])},f=[],y=a("59ad"),g=a.n(y),b=a("dc05"),x=a.n(b),C=new s["a"],k={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,row:{content_invoice:"",amount:"",apply_date:"",apply_usage:"",apply_user_name:"",bank_acct:"",bank_name:"",id_payment:"",invoice_amount:"",invoice_num:"",payee_name:""},view:{rmb_x:""}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"payment_add"})},pay_date_change:function(t){this.row.pay_date=t},init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isShowModal_||-1==this.map.id){t.next=5;break}return t.next=3,C.payment("detail",{id_payment:this.map.id});case 3:e=t.sent,1==e.meta.result?(a=e.data,this.row.amount=a.amount,this.row.apply_date=this.util.getNow(),this.row.apply_usage=a.content_invoice,this.row.apply_user_name=this.$store.state.userInfo.user_name,this.row.bank_acct=a.bank_account,this.row.bank_name=a.bank_name,this.row.id_payment=a.id,this.row.payee_name=a.name_payee,this.row.contract_code=a.contract_code):this.alertError(e.errors[0].abstract_info);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),transformRequest:function(){var t=this.row,e="";return e+=""==t.amount?"金额不能为空":"",e+=""==t.apply_date?"申请日期不能为空":"",e+=""==t.apply_usage?"申请用途不能为空":"",e+=""==t.apply_user_name?"申请人姓名不能为空":"",e+=""==t.bank_acct?"收款银行账号不能为空":"",e+=""==t.bank_name?"收款银行名称不能为空":"",e+=""==t.id_payment?"付款id不能为空":"",e+=""==t.invoice_amount?"发票金额不能为空":"",e+=""==t.invoice_num?"发票编号不能为空":"",e+=""==t.payee_name?"收款单位不能为空":"",e+=""==t.apply_usage?"用途不能为空":"",""==e?this.row:(this.$Message.info(e),!1)},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.transformRequest(),!e){t.next=7;break}return e.id_payment=this.map.id,t.next=5,C.payment("add",e);case 5:a=t.sent,1==a.meta.result?(this.$Message.info("操作成功"),this.init(),this.cancel()):this.alertError(a.errors[0].abstract_info);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},"row.amount":function(){this.view.rmb_x=x()(g()(this.row.amount))},map:{handler:function(t,e){this.init()},deep:!0}}},M=k,S=Object(d["a"])(M,w,f,!1,null,null,null);S.options.__file="payment_add.vue";var $=S.exports,I=new s["a"],P={components:{contractDetail:r["a"],paymentDetail:c["a"],paymentRegist:v,paymentAdd:$},data:function(){return{list:[],listCount:0,oper:"add",pagination:{pagerow:this.$store.state.pagination.pagerow,pageno:this.$store.state.pagination.pageno},contract_detail:{show:!1,map:{id:-1}},payment_detail:{show:!1,map:{id:-1}},payment_regist_par:{show:!1,map:{id:-1}},payment_add_par:{show:!1,map:{id:-1}},dic:{pay_type:this.$store.state.pay_type},selectItem:{commission_status:"-1",contract_code:"",contract_id:"-1",invoice_num:"",invoice_status:"-1",pageno:"",pagerow:"",pay_status:"-1",pay_time_end:this.util.getNow(-30),pay_time_start:this.util.getNow(30),payee_name:"",project_name:""}}},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.payment("select",this.getSelectItem());case 2:e=t.sent,1==e.meta.result?(this.list=e.data,this.listCount=e.meta.total):this.alertError(e.errors[0].abstract_info);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),dateChange:function(t){this.selectItem.pay_time_start=t[0],this.selectItem.pay_time_end=t[1]},pageSizeChange:function(t){this.pagination.pagerow=t,this.init()},getSelectItem:function(){return this.selectItem.pageno=this.pagination.pageno,this.selectItem.pagerow=this.pagination.pagerow,this.selectItem},showContractDetail:function(t){this.contract_detail.show=!0,this.contract_detail.map.id=t},showPaymentDetail:function(t){this.payment_detail.show=!0,this.payment_detail.map.id=t},payment_regist:function(t){this.payment_regist_par.show=!0,this.payment_regist_par.map.id=t},payment_add:function(t){this.payment_add_par.show=!0,this.payment_add_par.map.id=t},toLine:function(t,e){try{var a=JSON.parse(t),n="";switch(e||(e="description"),e){case"description":for(var o=0;o<a.length;o++)n+=a[o]["description"]+"<br>";break;case"fp":for(var i=0;i<a.length;i++)n+=a[i]["invoice_num"]+"<br>";break;case"bz":for(var s=0;s<a.length;s++)n+=a[s]["comments"]+"/ "+a[s]["pay_voucher"]+"<br>";break;case"pay_dates":for(var r=0;r<a.length;r++)n+=a[r]["pay_date"]+"<br>";break;default:break}return n}catch(e){return t}},emitComponents:function(t){switch(t.name){case"contract_detail":this.contract_detail.show=!1,this.contract_detail.map.id=-1;break;case"payment_detail":this.payment_detail.show=!1,this.payment_detail.map.id=-1;break;case"payment_add":this.payment_add_par.show=!1,this.payment_add_par.map.id=-1;break;case"payment_regist":this.payment_regist_par.show=!1,this.payment_regist_par.map.id=-1;break}this.init()}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},j=P,O=Object(d["a"])(j,n,o,!1,null,null,null);O.options.__file="payment.vue";e["default"]=O.exports},a0df:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"合同信息",width:672,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(e){t.isShowModal_=e},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-contractinfo"},[a("div",{staticClass:"formlist"},[a("ul",{staticClass:"clearfix"},[a("li",[a("label",[t._v("合同类型：")]),a("span",{staticClass:"txt"},[t._v(t._s(t.row.contract_type_name))])]),a("li",[a("label",[t._v("合同编号：")]),a("span",{staticClass:"txt"},[t._v(t._s(t.row.contract_code))])]),a("li",[a("label",{domProps:{innerHTML:t._s(1==t.row.sell_or_buy?"销售员：":"采购员：")}}),a("span",{staticClass:"txt"},[t._v(t._s(t.row.user_name))])]),a("li",[a("label",[t._v("项目名称：")]),a("span",{staticClass:"txt"},[t._v(t._s(t.row.project_name))])]),1==t.row.sell_or_buy?a("li",[a("label",[t._v("客户名称： ")]),a("span",{staticClass:"txt"},[t._v(t._s(t.row.client_name))])]):t._e(),2==t.row.sell_or_buy?a("li",[a("label",[t._v("供应商名称： ")]),a("span",{staticClass:"txt"},[t._v(t._s(t.row.supplier_name))])]):t._e(),t.row.paper_doc?a("li",[a("label",[t._v("纸质合同收到时间：")]),a("span",{staticClass:"txt"},[t._v(t._s(t.dataFormat(t.row.paper_doc_recv_time)))])]):t._e(),t.row.paper_doc?a("li",[a("label",[t._v("合同签订日期：")]),a("span",{staticClass:"txt"},[t._v(t._s(t.dataFormat(t.row.paper_doc_sign_time)))])]):t._e()]),a("div",{staticClass:"form clearfix"},[a("label",[t._v("合同服务内容：")]),a("div",{staticClass:"cnt ",domProps:{innerHTML:t._s(t.toLine(t.row.service_desc))}})]),a("div",{staticClass:"form clearfix"},[a("label",[t._v("付款方式：")]),a("div",{staticClass:"cnt",domProps:{innerHTML:t._s(t.toLine(t.row.payment_desc))}})]),1==t.row.sell_or_buy?a("div",{staticClass:"form clearfix"},[a("label",[t._v("佣金：")]),a("div",{staticClass:"cnt"},[t._v("\r\n                    "+t._s(t.row.commission_desc)+"\r\n                ")])]):t._e(),a("p",{staticClass:"form clearfix"},[a("label",[t._v("有效期：")]),a("span",{staticClass:"txt"},[t._v("  "+t._s(t.dataFormat(t.row.expire_time))+" ")])]),a("p",{staticClass:"form clearfix"},[a("label",[t._v("电子文件：")]),a("span",{staticClass:"txt"},[a("a",{attrs:{href:t.row.electron_doc_fullpath,target:"_blank"}},[t._v("   "+t._s(t.row.electron_doc)+" ")])])]),t.row.paper_doc?a("p",{staticClass:"form clearfix"},[a("label",[t._v("纸质合同：")]),a("span",{staticClass:"txt"},[a("a",{attrs:{href:t.row.paper_doc_fullpath,target:"_blank"}},[t._v("   "+t._s(t.row.paper_doc)+" ")])])]):t._e()])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("确定")])],1)])},o=[],i=(a("96cf"),a("3b8d")),s=(a("cadf"),a("551c"),a("097d"),a("494c")),r=new s["a"],c={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,row:{}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"contract_detail"})},toLine:function(t){try{for(var e=JSON.parse(t),a="",n=0;n<e.length;n++)a+=e[n]["description"]+"<br>";return a}catch(o){return t}},init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(-1==this.map.id||!this.isShowModal_){t.next=6;break}return console.log(this.map),t.next=4,r.contract("detail",{id:this.map.id});case 4:e=t.sent,1==e.meta.result?this.row=e.data:this.alertError(e.errors[0].abstract_info);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(t,e){this.init()},deep:!0}}},l=c,p=a("2877"),m=Object(p["a"])(l,n,o,!1,null,null,null);m.options.__file="contract_detail.vue";e["a"]=m.exports},a1ce:function(t,e,a){var n=a("63b6"),o=a("25eb"),i=a("294c"),s=a("e692"),r="["+s+"]",c="​",l=RegExp("^"+r+r+"*"),p=RegExp(r+r+"*$"),m=function(t,e,a){var o={},r=i(function(){return!!s[t]()||c[t]()!=c}),l=o[t]=r?e(_):s[t];a&&(o[a]=l),n(n.P+n.F*r,"String",o)},_=m.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(p,"")),t};t.exports=m},dc05:function(t,e){const a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=["元","拾","佰","仟","万","拾","佰","仟","亿","拾","佰","仟","万","拾","佰","仟","万"],o=["角","分"],i=t=>{if("[object Number]"===Object.prototype.toString.call(t)&&t>=.01){const e=[],[i,s]=String(t).split(".").map(t=>t.split("").map(t=>1*t)),r=i.length,c=r-1,l=r-5,p=r-9,m=r-13,_=r-17,u=r>1||i[0]>0,d=s&&(s[0]>0||s[1]>0),h=i[l-1]>0||i[l-2]>0||i[l-3]>0,v=r-n.length;let w=0;for(let t=r-1;t>=0;t--)(i[t]>0||t===c&&u||t===l&&h||t===p||t===m||t===_)&&e.unshift(n[w]),(i[t]>0||i[t+1]>0&&t!==l&&t!==p&&t!==m&&t!==_||t<=v)&&e.unshift(a[i[t]]),w++;return d?((s[0]>0||u)&&e.push(a[s[0]]),s[0]>0&&e.push(o[0]),s[1]>0&&(e.push(a[s[1]]),e.push(o[1]))):e.push("整"),e.join("")}return"零元整"};t.exports=i},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},f570:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"收款情况一览表",width:1294,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(e){t.isShowModal_=e},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-accountdetail"},[a("div",{staticClass:"tablecommondiv"},[a("table",{staticClass:"tablecommon table-accountdetail"},[a("thead",[a("tr",[a("th",[t._v("合同编号")]),a("th",[t._v("销售员")]),a("th",[t._v("项目名称")]),a("th",[t._v("客户名称")]),a("th",[t._v("付款方式")]),a("th",[t._v("计费日期")]),a("th",[t._v("应收金额")]),a("th",[t._v("开票金额")]),a("th",[t._v("开票日期")]),a("th",[t._v("发票号")]),a("th",[t._v("到账金额")]),a("th",[t._v("到账日期")]),a("th",[t._v("备注/付款凭证")])])]),a("tbody",t._l(t.list,function(e,n){return a("tr",{key:n},[a("td",[t._v(" "+t._s(e.contract_code))]),a("td",[t._v(t._s(e.user_name))]),a("td",[t._v(t._s(e.project_name))]),a("td",[t._v(t._s(e.name_payer))]),a("td",t._l(t.dic.pay_type,function(n,o){return n.id==e.pay_type?a("span",{key:o,domProps:{innerHTML:t._s(n.name)}}):t._e()}),0),a("td",[t._v("\r\n                            始："+t._s(t.dataFormat(e.collect_start))+"\r\n                            "),e.collect_end<4070914352e3?[a("br"),t._v("止："+t._s(t.dataFormat(e.collect_end))+"\r\n                            ")]:t._e()],2),a("td",[t._v(t._s(e.amount))]),a("td",[t._v(t._s(e.amount_invoice))]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.invoice_dates,"invoice_dates"))}}),a("td",{domProps:{innerHTML:t._s(t.toLine(e.invoice_nums,"invoice_nums"))}}),a("td",[t._v(t._s(e.amount_collected))]),a("td",{domProps:{innerHTML:t._s(t.toLine(e.collect_dates,"collect_date"))}}),a("td",{domProps:{innerHTML:t._s(t.toLine(e.voucher_comment,"bz"))}})])}),0)])]),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"pagewrap"},[a("Page",{attrs:{total:t.listCount,"show-sizer":"","page-size":t.pagination.pagerow,"show-total":"","show-elevator":"",current:t.pagination.pageno},on:{"update:pageSize":function(e){t.$set(t.pagination,"pagerow",e)},"update:current":function(e){t.$set(t.pagination,"pageno",e)},"on-change":t.init,"on-page-size-change":t.pageSizeChange}})],1)])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("确定")])],1)])},o=[],i=(a("96cf"),a("3b8d")),s=(a("cadf"),a("551c"),a("097d"),a("494c")),r=new s["a"],c={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{list:[],listCount:0,pagination:{pagerow:this.$store.state.pagination.pagerow,pageno:this.$store.state.pagination.pageno},isShowModal_:this.isShowModal,id:this.map.id,dic:{pay_type:this.$store.state.pay_type},row:{}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"payment_detail"})},init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(-1==this.map.id||!this.isShowModal_){t.next=5;break}return t.next=3,r.collect("select",{collect_status:"-1",collect_time_end:this.util.getNow(),collect_time_start:"",contract_code:"",contract_id:this.map.id,invoice_num:"",invoice_status:"-1",pageno:this.pagination.pageno,pagerow:this.pagination.pagerow,payer_name:"",project_name:"",user_name:""});case 3:e=t.sent,1==e.meta.result?(this.list=e.data,this.listCount=e.meta.total):this.alertError(e.errors[0].abstract_info);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.pagination.pagerow=t,this.init()},toLine:function(t,e){try{var a=JSON.parse(t),n="";switch(e||(e="description"),e){case"description":for(var o=0;o<a.length;o++)n+=a[o]["description"]+"<br>";break;case"collect_date":for(var i=0;i<a.length;i++)n+=a[i]["collect_date"]+"<br>";break;case"bz":for(var s=0;s<a.length;s++)n+=a[s]["comments"]+"/"+a[s]["collect_voucher"]+"<br>";break;case"invoice_dates":for(var r=0;r<a.length;r++)n+=a[r]["invoice_dates"]+"<br>";break;case"invoice_nums":for(var c=0;c<a.length;c++)n+=a[c]["invoice_num"]+"<br>";break;default:break}return n}catch(e){return t}}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(t,e){this.init()},deep:!0}}},l=c,p=a("2877"),m=Object(p["a"])(l,n,o,!1,null,null,null);m.options.__file="payment_detail.vue";e["a"]=m.exports}}]);