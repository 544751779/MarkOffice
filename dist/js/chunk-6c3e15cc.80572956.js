(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c3e15cc"],{"02f4":function(t,a,e){var r=e("4588"),i=e("be13");t.exports=function(t){return function(a,e){var n,o,s=String(i(a)),d=r(e),c=s.length;return d<0||d>=c?t?"":void 0:(n=s.charCodeAt(d),n<55296||n>56319||d+1===c||(o=s.charCodeAt(d+1))<56320||o>57343?t?s.charAt(d):n:t?s.slice(d,d+2):o-56320+(n-55296<<10)+65536)}}},"0390":function(t,a,e){"use strict";var r=e("02f4")(!0);t.exports=function(t,a,e){return a+(e?r(t,a).length:1)}},"11e9":function(t,a,e){var r=e("52a7"),i=e("4630"),n=e("6821"),o=e("6a99"),s=e("69a8"),d=e("c69a"),c=Object.getOwnPropertyDescriptor;a.f=e("9e1e")?c:function(t,a){if(t=n(t),a=o(a,!0),d)try{return c(t,a)}catch(e){}if(s(t,a))return i(!r.f.call(t,a),t[a])}},"20fd":function(t,a,e){"use strict";var r=e("d9f6"),i=e("aebd");t.exports=function(t,a,e){a in t?r.f(t,a,i(0,e)):t[a]=e}},"214f":function(t,a,e){"use strict";e("b0c5");var r=e("2aba"),i=e("32e9"),n=e("79e5"),o=e("be13"),s=e("2b4c"),d=e("520a"),c=s("species"),_=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),l=function(){var t=/(?:)/,a=t.exec;t.exec=function(){return a.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}();t.exports=function(t,a,e){var p=s(t),u=!n(function(){var a={};return a[p]=function(){return 7},7!=""[t](a)}),h=u?!n(function(){var a=!1,e=/a/;return e.exec=function(){return a=!0,null},"split"===t&&(e.constructor={},e.constructor[c]=function(){return e}),e[p](""),!a}):void 0;if(!u||!h||"replace"===t&&!_||"split"===t&&!l){var m=/./[p],v=e(o,p,""[t],function(t,a,e,r,i){return a.exec===d?u&&!i?{done:!0,value:m.call(a,e,r)}:{done:!0,value:t.call(e,a,r)}:{done:!1}}),f=v[0],b=v[1];r(String.prototype,t,f),i(RegExp.prototype,p,2==a?function(t,a){return b.call(t,this,a)}:function(t){return b.call(t,this)})}}},"28a5":function(t,a,e){"use strict";var r=e("aae3"),i=e("cb7c"),n=e("ebd6"),o=e("0390"),s=e("9def"),d=e("5f1b"),c=e("520a"),_=Math.min,l=[].push,p="split",u="length",h="lastIndex",m=!!function(){try{return new RegExp("x","y")}catch(t){}}();e("214f")("split",2,function(t,a,e,v){var f;return f="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[u]||2!="ab"[p](/(?:ab)*/)[u]||4!="."[p](/(.?)(.?)/)[u]||"."[p](/()()/)[u]>1||""[p](/.?/)[u]?function(t,a){var i=String(this);if(void 0===t&&0===a)return[];if(!r(t))return e.call(i,t,a);var n,o,s,d=[],_=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=void 0===a?4294967295:a>>>0,v=new RegExp(t.source,_+"g");while(n=c.call(v,i)){if(o=v[h],o>p&&(d.push(i.slice(p,n.index)),n[u]>1&&n.index<i[u]&&l.apply(d,n.slice(1)),s=n[0][u],p=o,d[u]>=m))break;v[h]===n.index&&v[h]++}return p===i[u]?!s&&v.test("")||d.push(""):d.push(i.slice(p)),d[u]>m?d.slice(0,m):d}:"0"[p](void 0,0)[u]?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,r){var i=t(this),n=void 0==e?void 0:e[a];return void 0!==n?n.call(e,i,r):f.call(String(i),e,r)},function(t,a){var r=v(f,t,this,a,f!==e);if(r.done)return r.value;var c=i(t),l=String(this),p=n(c,RegExp),u=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),b=new p(m?c:"^(?:"+c.source+")",h),w=void 0===a?4294967295:a>>>0;if(0===w)return[];if(0===l.length)return null===d(b,l)?[l]:[];var g=0,y=0,k=[];while(y<l.length){b.lastIndex=m?y:0;var x,C=d(b,m?l:l.slice(y));if(null===C||(x=_(s(b.lastIndex+(m?0:y)),l.length))===g)y=o(l,y,u);else{if(k.push(l.slice(g,y)),k.length===w)return k;for(var S=1;S<=C.length-1;S++)if(k.push(C[S]),k.length===w)return k;y=g=x}}return k.push(l.slice(g)),k}]})},"32a6":function(t,a,e){var r=e("241e"),i=e("c3a1");e("ce7e")("keys",function(){return function(t){return i(r(t))}})},"520a":function(t,a,e){"use strict";var r=e("0bfb"),i=RegExp.prototype.exec,n=String.prototype.replace,o=i,s="lastIndex",d=function(){var t=/a/,a=/b*/g;return i.call(t,"a"),i.call(a,"a"),0!==t[s]||0!==a[s]}(),c=void 0!==/()??/.exec("")[1],_=d||c;_&&(o=function(t){var a,e,o,_,l=this;return c&&(e=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),d&&(a=l[s]),o=i.call(l,t),d&&o&&(l[s]=l.global?o.index+o[0].length:a),c&&o&&o.length>1&&n.call(o[0],e,function(){for(_=1;_<arguments.length-2;_++)void 0===arguments[_]&&(o[_]=void 0)}),o}),t.exports=o},"52a7":function(t,a){a.f={}.propertyIsEnumerable},"549b":function(t,a,e){"use strict";var r=e("d864"),i=e("63b6"),n=e("241e"),o=e("b0dc"),s=e("3702"),d=e("b447"),c=e("20fd"),_=e("7cd6");i(i.S+i.F*!e("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var a,e,i,l,p=n(t),u="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,f=0,b=_(p);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==b||u==Array&&s(b))for(a=d(p.length),e=new u(a);a>f;f++)c(e,f,v?m(p[f],f):p[f]);else for(l=b.call(p),e=new u;!(i=l.next()).done;f++)c(e,f,v?o(l,m,[i.value,f],!0):i.value);return e.length=f,e}})},"54a1":function(t,a,e){e("6c1c"),e("1654"),t.exports=e("95d5")},"5dbc":function(t,a,e){var r=e("d3f4"),i=e("8b97").set;t.exports=function(t,a,e){var n,o=a.constructor;return o!==e&&"function"==typeof o&&(n=o.prototype)!==e.prototype&&r(n)&&i&&i(t,n),t}},"5f1b":function(t,a,e){"use strict";var r=e("23c6"),i=RegExp.prototype.exec;t.exports=function(t,a){var e=t.exec;if("function"===typeof e){var n=e.call(t,a);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,a)}},"75fc":function(t,a,e){"use strict";var r=e("a745"),i=e.n(r);function n(t){if(i()(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var o=e("774e"),s=e.n(o),d=e("c8bb"),c=e.n(d);function _(t){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return n(t)||_(t)||l()}e.d(a,"a",function(){return p})},"774e":function(t,a,e){t.exports=e("d2d5")},"8aae":function(t,a,e){e("32a6"),t.exports=e("584a").Object.keys},"8b97":function(t,a,e){var r=e("d3f4"),i=e("cb7c"),n=function(t,a){if(i(t),!r(a)&&null!==a)throw TypeError(a+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,a,r){try{r=e("9b43")(Function.call,e("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),a=!(t instanceof Array)}catch(i){a=!0}return function(t,e){return n(t,e),a?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:n}},9093:function(t,a,e){var r=e("ce10"),i=e("e11e").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"95d5":function(t,a,e){var r=e("40c3"),i=e("5168")("iterator"),n=e("481b");t.exports=e("584a").isIterable=function(t){var a=Object(t);return void 0!==a[i]||"@@iterator"in a||n.hasOwnProperty(r(a))}},a21f:function(t,a,e){var r=e("584a"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},a4bb:function(t,a,e){t.exports=e("8aae")},aa77:function(t,a,e){var r=e("5ca1"),i=e("be13"),n=e("79e5"),o=e("fdef"),s="["+o+"]",d="​",c=RegExp("^"+s+s+"*"),_=RegExp(s+s+"*$"),l=function(t,a,e){var i={},s=n(function(){return!!o[t]()||d[t]()!=d}),c=i[t]=s?a(p):o[t];e&&(i[e]=c),r(r.P+r.F*s,"String",i)},p=l.trim=function(t,a){return t=String(i(t)),1&a&&(t=t.replace(c,"")),2&a&&(t=t.replace(_,"")),t};t.exports=l},aae3:function(t,a,e){var r=e("d3f4"),i=e("2d95"),n=e("2b4c")("match");t.exports=function(t){var a;return r(t)&&(void 0!==(a=t[n])?!!a:"RegExp"==i(t))}},ac6a:function(t,a,e){for(var r=e("cadf"),i=e("0d58"),n=e("2aba"),o=e("7726"),s=e("32e9"),d=e("84f2"),c=e("2b4c"),_=c("iterator"),l=c("toStringTag"),p=d.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(u),m=0;m<h.length;m++){var v,f=h[m],b=u[f],w=o[f],g=w&&w.prototype;if(g&&(g[_]||s(g,_,p),g[l]||s(g,l,f),d[f]=p,b))for(v in r)g[v]||n(g,v,r[v],!0)}},b0c5:function(t,a,e){"use strict";var r=e("520a");e("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},bd86:function(t,a,e){"use strict";e.d(a,"a",function(){return n});var r=e("85f2"),i=e.n(r);function n(t,a,e){return a in t?i()(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},c576:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"clearfix",attrs:{id:"main"}},[e("div",{staticClass:"containarea"},[e("h2",{staticClass:"commontit"},[t._v("工单管理")]),e("div",{staticClass:"container"},[e("div",{staticClass:"tabletop clearfix"},[e("div",{staticClass:"search workordermag clearfix"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchItem.client_name,expression:"searchItem.client_name"}],staticClass:"formtxt w5",attrs:{type:"text",placeholder:"输入项目/客户名称"},domProps:{value:t.searchItem.client_name},on:{input:function(a){a.target.composing||t.$set(t.searchItem,"client_name",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchItem.contract_code,expression:"searchItem.contract_code"}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入销售/采购合同编号"},domProps:{value:t.searchItem.contract_code},on:{input:function(a){a.target.composing||t.$set(t.searchItem,"contract_code",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchItem.circuit_code,expression:"searchItem.circuit_code"}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入线路编号"},domProps:{value:t.searchItem.circuit_code},on:{input:function(a){a.target.composing||t.$set(t.searchItem,"circuit_code",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchItem.workorder_code,expression:"searchItem.workorder_code"}],staticClass:"formtxt w4",attrs:{type:"text",placeholder:"输入工单编号"},domProps:{value:t.searchItem.workorder_code},on:{input:function(a){a.target.composing||t.$set(t.searchItem,"workorder_code",a.target.value)}}}),e("a",{staticClass:"btn",attrs:{href:"#"},on:{click:t.submitSearch}},[t._v("搜索")])])]),e("div",{staticClass:"tablecommondiv"},[e("table",{staticClass:"tablecommon table-workmanage"},[t._m(0),e("tbody",t._l(t.list_worksheet,function(a,r){return e("tr",{key:r},[e("td",[e("a",{attrs:{href:"#"}},[t._v(t._s(a.contract_code))])]),e("td",{domProps:{innerHTML:t._s(t.outputServicDesc(a.payment_desc))}}),e("td",[t._v(t._s(a.project_name))]),e("td",[t._v(t._s(a.client_name))]),e("td",{domProps:{innerHTML:t._s(t.outputServicDesc(a.service_desc))}}),e("td",t._l(t.worksheetControll(a.worksheet_info),function(r,i){return e("span",{key:i},[e("span",{staticClass:"tit"},[t._v("\r\n                                    ("+t._s(r.service_desc)+")\r\n                                    "),e("a",{attrs:{href:"#"},domProps:{innerHTML:t._s(t.outputBuyContractCode(r.buy_contract))}}),e("em",[t._v("/")]),e("a",{attrs:{href:"#"},on:{click:function(a){t.refForm(r.worksheet_type,r.worksheet.id)}}},[t._v(t._s(r.worksheet.code))]),e("em",[t._v("/")]),""!=r.circuit_code?e("a",{attrs:{href:"#"}},[t._v(t._s(r.circuit_code)+"   ")]):t._e(),""!=r.circuit_code?e("em",[t._v("/")]):t._e(),1==r.status&&1==a.action_complete?e("a",{attrs:{href:"#"},on:{click:function(a){t.showView("order_done_show",r.worksheet.id)}}},[t._v("完工登记")]):e("a",{attrs:{href:"#"}},[t._v("已完工")]),e("em",[t._v("/")])]),e("br")])}),0),e("td",[1==a.action_circuit?e("a",{staticClass:"alink",attrs:{href:"#"},on:{click:function(e){t.refForm("circuit_add_show",a.id)}}},[t._v("线路工单")]):t._e(),1==a.action_idc?e("a",{staticClass:"alink",attrs:{href:"#"},on:{click:function(e){t.refForm("idc_add_show",a.id)}}},[t._v("IDC工单 ")]):t._e()])])}),0)])]),e("div",{staticClass:"tablebottom"},[e("div",{staticClass:"pagewrap"},[e("Page",{attrs:{total:t.listCount,"show-sizer":"","page-size":t.searchItem.pagerow,"show-total":"","show-elevator":"",current:t.searchItem.pageno},on:{"update:pageSize":function(a){t.$set(t.searchItem,"pagerow",a)},"update:current":function(a){t.$set(t.searchItem,"pageno",a)},"on-change":t.init,"on-page-size-change":t.pageSizeChange}})],1)])])]),e("circuit-add",{ref:"formCircuitAdd",attrs:{"is-show-modal":t.modalShow.isShowCircuitAdd,"id-contract":t.modalViewPass.id_contract},on:{"emit-show-modal":t.showView,"emit-init-refresh":t.init}}),e("circuit-view",{ref:"formCircuitShow",attrs:{"is-show-modal":t.modalShow.isShowCircuitView,idWorkSheet:t.modalViewPass.id_worksheet_pass},on:{emitShowView:t.showView,"emit-init-refresh":t.init}}),e("idc-add",{ref:"formIdcAdd",attrs:{"is-show-modal":t.modalShow.isShowIdcAdd,"id-contract":t.modalViewPass.id_contract},on:{"emit-show-modal":t.showView,"emit-init-refresh":t.init}}),e("idc-view",{ref:"formIdcView",attrs:{"is-show-modal":t.modalShow.isShowIdcView},on:{"emit-show-modal":t.showView,"emit-init-refresh":t.init}}),e("order-done",{attrs:{"is-show-modal":t.modalShow.isShowOrderdone,"id-worksheet":t.modalViewPass.id_worksheet_pass},on:{"emit-show-modal":t.showView,"emit-init-refresh":t.init}})],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{colspan:"5"}},[t._v("销售合同")]),e("th",{attrs:{colspan:"2"}},[t._v("施工单管理")])]),e("tr",[e("th",[t._v("销售合同编号")]),e("th",[t._v("计费日期")]),e("th",[t._v("项目名称")]),e("th",[t._v("客户名称")]),e("th",[t._v("合同服务内容")]),e("th",[t._v("已派单信息："),e("span",{staticClass:"grey"},[t._v("业务类型/采购合同编号/工单编号/线路编号")])]),e("th",[t._v("派单")])])])}],n=(e("ac6a"),e("96cf"),e("3b8d")),o=e("494c"),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("modal",{attrs:{width:820,"footer-hide":!0,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(a){t.isShowModal_=a},expression:"isShowModal_"}},[e("div",{staticClass:"layer layerworkorder layer-idc"},[e("h2",[t._v("IDC 施工单")]),e("div",{staticClass:"tableblacktop clearfix"},[e("div",{staticClass:"leftnum"},[e("label",[t._v("销售合同编号：")]),e("span",[t._v(t._s(t.data.contract_code))])]),e("div",{staticClass:"rightnum"},[e("label",[t._v("工单编号：")]),e("span",[t._v(" "+t._s(t.data.code))])])]),e("div",{staticClass:"tableblack"},[e("table",[e("tbody",[e("tr",[e("th",[t._v("客户名称")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.client_name))])]),e("tr",[e("th",[t._v("合同服务内容")]),e("td",{attrs:{colspan:"3"}},[e("Select",{model:{value:t.spliteContractCabinetList,callback:function(a){t.spliteContractCabinetList=a},expression:"spliteContractCabinetList"}},t._l(t.contractCabinetList,function(a){return e("Option",{key:a.value,attrs:{value:a.cabinet_type+"-"+a.description+"-"+a.id}},[t._v(t._s(a.description))])}),1)],1),e("th",[t._v("业务类型")]),e("td",[t._v(t._s(t.data.contract_type_front_output))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("机柜")])]),e("tr",[e("th",[t._v("机柜资源编号")]),e("td",[e("Select",{attrs:{filterable:"",clearable:""},on:{"on-query-change":t.cabinetDropdown},model:{value:t.splitCabinetVal,callback:function(a){t.splitCabinetVal=a},expression:"splitCabinetVal"}},t._l(t.resourceData.cabinet_data,function(a,r){return e("Option",{key:r,attrs:{value:a.id+"-"+a.code}},[t._v(t._s(a.code))])}),1)],1),e("th",[t._v("机柜编号")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.cabinet_code,expression:"data.cabinet_code"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.cabinet_code},on:{input:function(a){a.target.composing||t.$set(t.data,"cabinet_code",a.target.value)}}})]),e("th",[t._v("数量")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.cabinet_capacity,expression:"data.cabinet_capacity"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.cabinet_capacity},on:{input:function(a){a.target.composing||t.$set(t.data,"cabinet_capacity",a.target.value)}}})])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("IP")])]),e("tr",[e("th",[t._v("IP资源编号")]),e("td",[e("Select",{attrs:{filterable:"",clearable:""},on:{"on-query-change":t.ipDropdown},model:{value:t.splitIpVal,callback:function(a){t.splitIpVal=a},expression:"splitIpVal"}},t._l(t.resourceData.ip_data,function(a,r){return e("Option",{key:r,attrs:{value:a.id+"-"+a.code}},[t._v(t._s(a.code))])}),1)],1),e("th",[t._v("IP地址")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ip_data_detail.ip_address,expression:"ip_data_detail.ip_address"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.ip_data_detail.ip_address},on:{input:function(a){a.target.composing||t.$set(t.ip_data_detail,"ip_address",a.target.value)}}})]),e("th",[t._v("IP数量")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ip_data_detail.ip_num,expression:"ip_data_detail.ip_num"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.ip_data_detail.ip_num},on:{input:function(a){a.target.composing||t.$set(t.ip_data_detail,"ip_num",a.target.value)}}})]),e("td",[e("a",{attrs:{title:"添加"},on:{click:function(a){t.ip_array()}}},[e("i",{staticClass:"text-icon icc-add"})])])]),e("tr",[e("th",[t._v("修正样式")]),t._l(t.ip_data_row,function(a,r){return e("ul",{key:r},[e("li",[t._v(" "+t._s(r)+" - "+t._s(a.description)+"  ")])])})],2),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("带宽")])]),e("tr",[e("th",[t._v("带宽资源编号")]),e("td",[e("Select",{attrs:{filterable:"",clearable:"","label-in-value":""},on:{"on-query-change":t.bandwidthDropdown,"on-change":t.bandwidthChange}},t._l(t.resourceData.bandwidth_data,function(a,r){return e("Option",{key:r,attrs:{value:a.id}},[t._v(t._s(a.code))])}),1)],1),e("th",[t._v("带宽速率")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.bandwidth_speed,expression:"data.bandwidth_speed"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.bandwidth_speed},on:{input:function(a){a.target.composing||t.$set(t.data,"bandwidth_speed",a.target.value)}}})]),e("th",[t._v("带宽方式")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.bandwidth_type,expression:"data.bandwidth_type"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.bandwidth_type},on:{input:function(a){a.target.composing||t.$set(t.data,"bandwidth_type",a.target.value)}}})])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("子端口")])]),e("tr",[e("td",{staticClass:"colform clearfix",attrs:{colspan:"6"}},[e("label",[t._v("设备编号")]),e("p",{staticClass:"num01"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.port_code,expression:"data.port_code"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.port_code},on:{input:function(a){a.target.composing||t.$set(t.data,"port_code",a.target.value)}}})]),e("label",[t._v("子端口号")]),e("p",{staticClass:"num02"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.port_num,expression:"data.port_num"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.port_num},on:{input:function(a){a.target.composing||t.$set(t.data,"port_num",a.target.value)}}})]),e("label",[t._v("端口开放程度")]),e("p",{staticClass:"num03"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.port_open,expression:"data.port_open"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.port_open},on:{input:function(a){a.target.composing||t.$set(t.data,"port_open",a.target.value)}}})])])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("其它 ")])]),e("tr",[e("th",[t._v("割接人")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_name,expression:"data.worker_name"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_name},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_name",a.target.value)}}})]),e("th",[t._v("手机")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_mobile,expression:"data.worker_mobile"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_mobile},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_mobile",a.target.value)}}})]),e("th",[t._v("邮箱")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_email,expression:"data.worker_email"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_email},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_email",a.target.value)}}})])]),e("tr",[e("th",[t._v("备注")]),e("td",{staticClass:"remark",attrs:{colspan:"5"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.desc,expression:"data.desc"}],attrs:{placeholder:"手工填写"},domProps:{value:t.data.desc},on:{input:function(a){a.target.composing||t.$set(t.data,"desc",a.target.value)}}})])]),e("tr",[e("th",[t._v("派工人")]),e("td",[t._v(t._s(t.data.dispatcher_name))]),e("th",[t._v("希望完工日期")]),e("td",[e("div",{staticClass:"date dateorder"},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date","split-panels":"",placeholder:"选择日期",format:"yyyy-MM-dd"},on:{"on-change":function(a){t.data.finish_time=a}},model:{value:t.data.finish_time,callback:function(a){t.$set(t.data,"finish_time",a)},expression:"data.finish_time"}})],1)]),e("td",[t._v("派工日期 ")]),e("td",[t._v(t._s(t.data.dispatch_time))])])])])])]),e("div",{staticClass:"ivu-modal-footer"},[e("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.sumbitAdd}},[e("span",[t._v("提交")])])])])},d=[],c=e("a4bb"),_=e.n(c),l=(e("28a5"),e("5176")),p=e.n(l),u=e("f499"),h=e.n(u),m=(e("7f7f"),e("bd86")),v=(e("c5f6"),e("c1df")),f=e.n(v),b=new o["a"],w={props:{isShowModal:{type:Boolean},idContract:{type:Number}},components:{},data:function(){return{isShowModal_:this.isShowModal,idContract_:this.idContract,data:Object(m["a"])({id_contract:0,contract_code:"",workorder_description:"",contract_cabinet_id:0,contract_type:"",contract_type_front_output:"",client_name:"",id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",bandwidth_type:0,id_cabinet:0,cabinet_resource_code:"",cabinet_code:"",cabinet_capacity:0,port_code:"",port_num:"",port_open:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:f()().format("YYYYMMDD"),finish_time:""},"client_name",""),resourceData:{ip_data:[],cabinet_data:[],bandwidth_data:[]},splitCabinetVal:"",splitbandwidthVal:"",spliteContractCabinetList:"",contractCabinetList:[],splitIpVal:"",ip_data_detail:{id_ip:0,ip_resource_code:"",ip_address:"",ip_num:0},ip_data_row:[],buyer_contract_list_info:[]}},methods:{init_idc_add:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.workorder("detail_add",{contract_id:a});case 2:return e=t.sent,1==e.meta.result?(console.log(e),this.data.id_contract=e.data.contract.id,this.data.contract_code=e.data.contract.contract_code,this.data.code="IDC-"+f()().format("YYYYMMDD"),this.data.client_name=e.data.contract.name):this.alertError(e.errors[0].abstract_info),t.next=6,b.auth("get_current_user_info");case 6:return r=t.sent,1==r.meta.result?(this.data.dispatcher_id=r.data.id,this.data.dispatcher_name=r.data.user_name):this.alertError(e.errors[0].abstract_info),t.next=10,b.workorder("detail_add",{contract_id:a});case 10:i=t.sent,1==i.meta.result?(console.log("t_contract_cabinet"),console.log(i.data.cabinet),this.contractCabinetList=i.data.cabinet):this.alertError(i.errors[0].abstract_info);case 12:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),transferRequestJava:function(){var t={};return t.id_contract=this.data.id_contract,t.workorder_description=this.data.workorder_description,t.contract_cabinet_id=this.data.contract_cabinet_id,t.id_bandwidth=this.data.id_bandwidth,t.bandwidth_resource_code=this.data.bandwidth_resource_code,t.bandwidth_speed=this.data.bandwidth_speed,t.bandwidth_type=this.data.bandwidth_type,t.id_cabinet=this.data.id_cabinet,t.cabinet_resource_code=this.data.cabinet_resource_code,t.cabinet_code=this.data.cabinet_code,t.cabinet_capacity=this.data.cabinet_capacity,t.port_code=this.data.port_code,t.port_num=this.data.port_num,t.port_open=this.data.port_open,t.code=this.data.code,t.worker_name=this.data.worker_name,t.worker_mobile=this.data.worker_mobile,t.worker_email=this.data.worker_email,t.desc=this.data.desc,t.dispatcher_id=this.data.dispatcher_id,t.dispatcher_name=this.data.dispatcher_name,t.dispatch_time=this.data.dispatch_time,t.finish_time=this.data.finish_time,t.worksheet_ip=this.ip_data_row,t.worksheet_type=1,h()(t)},sumbitAdd:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.transferRequestJava()),t.next=3,b.workorder("add",{worksheet_info:this.transferRequestJava()});case 3:a=t.sent,1==a.meta.result?(this.$Message.info("添加 IDC 工单成功"),this.cancel()):this.alertError(a.errors[0].abstract_info);case 5:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),cancel:function(){this.$emit("emit-show-modal","idc_add_show"),this.$emit("emit-init-refresh"),this.clearData()},clearData:function(){this.data={id_contract:0,contract_code:"",workorder_description:"",contract_type:"",contract_type_front_output:"",client_name:"",id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",bandwidth_type:0,id_cabinet:0,cabinet_resource_code:"",cabinet_code:"",cabinet_capacity:0,port_code:"",port_num:"",port_open:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:f()().format("YYYYMMDD"),finish_time:""},this.ip_data_row=[],this.splitCabinetVal="",this.splitbandwidthVal="",this.spliteContractCabinetList="",this.splitIpVal="",this.resourceData={ip_data:[],cabinet_data:[],bandwidth_data:[]}},outputServicDesc:function(t){try{for(var a=JSON.parse(t),e="",r=0;r<a.length;r++)e+=a[r]["description"]+"<br>";return e}catch(i){return t}},ipDropdown:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!=a){t.next=4;break}this.resourceData.ip_data=[],t.next=8;break;case 4:return t.next=6,b.resource_ip("dropdown",{key:a,pagerow:15});case 6:e=t.sent,1==e.meta.result&&(this.resourceData.ip_data=e.data);case 8:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),cabinetDropdown:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!=a){t.next=4;break}this.resourceData.cabinet_current=[],t.next=9;break;case 4:return t.next=6,b.resource_cabinet("dropdown",{key:a,cabinet_type:this.data.contract_type,pagerow:15});case 6:e=t.sent,console.log(e),1==e.meta.result&&(this.resourceData.cabinet_data=e.data);case 9:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),bandwidthDropdown:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!=a){t.next=4;break}this.resourceData.bandwidth_data=[],t.next=8;break;case 4:return t.next=6,b.resource_bandwidth("dropdown",{key:a,pagerow:15});case 6:e=t.sent,1==e.meta.result&&(this.resourceData.bandwidth_data=e.data);case 8:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),bandwidthChange:function(t){var a=this;this.resourceData.bandwidth_data.forEach(function(e){e.id==t.value&&(a.data.id_bandwidth=e.id,a.data.bandwidth_resource_code=e.code)})},ip_array:function(){var t="",a="",e=p()({},this.ip_data_detail);if(e.id_ip||(t="IP 资源编号(id)"),e.ip_resource_code||(t="IP 资源编号(code)"),e.ip_address||(t="IP 地址不能为空"),e.ip_num||(t="IP 数量不能为空"),a="IP 资源编号: "+e.ip_resource_code+"- IP 地址: "+e.ip_address+"- IP 数量: "+e.ip_num,t)return this.$Message.info(t),!1;e.description=a,this.ip_data_row.push(e),this.clearServiceForm()},clearServiceForm:function(){var t=this.ip_data_detail;for(var a in t)t[a]="";this.splitIpVal=""}},computed:{},mounted:function(){},watch:{isShowModal:function(t,a){var e=this;e.isShowModal_=t},idContract:function(t,a){var e=this;e.idContract_=this.newVal},data:{handler:function(t){var a=this;null!=t.finish_time&&void 0!=t.finish_time&&""!=t.finish_time&&(a.data.finish_time=f()(t.finish_time).format("YYYY-MM-DD HH:mm:ss"))},deep:!0,immediate:!0},splitIpVal:{handler:function(t){try{var a=this,e=t.split("-");a.data.ip_id=e[0],a.data.ip_resource_code=e[1],a.ip_data_detail.id_ip=e[0],a.ip_data_detail.ip_resource_code=e[1]}catch(r){return}},immediate:!0},splitCabinetVal:{handler:function(t){try{var a=this,e=t.split("-");a.data.id_cabinet=e[0],a.data.cabinet_resource_code=e[1]}catch(r){return}},immediate:!0},spliteContractCabinetList:{handler:function(t){try{var a=this,e=t.split("-");a.data.contract_type=e[0],a.data.workorder_description=e[1],a.data.contract_cabinet_id=e[2],1==e[0]&&(this.data.contract_type_front_output="整柜"),2==e[0]&&(this.data.contract_type_front_output="容量")}catch(r){return}},immediate:!0},ip_data_row:{handler:function(t){for(var a=0;a<t.length;a++)_()(t[a]).forEach(function(e){console.log(e,t[a][e])})},deeped:!0,immediate:!0}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},g=w,y=e("2877"),k=Object(y["a"])(g,s,d,!1,null,null,null);k.options.__file="idc_add.vue";var x=k.exports,C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Modal",{attrs:{width:820,"footer-hide":!0,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(a){t.isShowModal_=a},expression:"isShowModal_"}},[e("div",{staticClass:"layer layerworkorder layer-idc view"},[e("h2",[t._v("IDC 施工单")]),e("div",{staticClass:"tableblacktop clearfix"},[e("div",{staticClass:"leftnum"},[e("label",[t._v("销售合同编号：")]),e("span",[t._v(t._s(t.data.contract_code))])]),e("div",{staticClass:"rightnum"},[e("label",[t._v("工单编号：")]),e("span",[t._v(t._s(t.data.code))])])]),e("div",{staticClass:"tableblack"},[e("table",[e("tbody",[e("tr",[e("th",[t._v("客户名称")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.client_name))])]),e("tr",[e("th",[t._v("合同服务内容")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.workorder_description))]),e("th",[t._v("业务类型")]),e("td",[t._v(t._s(t.data.contract_type))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("机柜")])]),e("tr",[e("th",[t._v("机柜资源编号")]),e("td",[t._v(t._s(t.data.cabinet_resource_code))]),e("th",[t._v("机柜编号")]),e("td",[t._v(t._s(t.data.cabinet_code))]),e("th",[t._v("数量")]),e("td",[t._v(t._s(t.data.cabinet_capacity))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("IP")])]),e("tr",[e("th",[t._v("IP资源编号")]),e("td",{domProps:{innerHTML:t._s(t.outputIp(t.data.worksheet_ip))}})]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("带宽")])]),e("tr",[e("th",[t._v("带宽资源编号")]),e("td",[t._v(t._s(t.data.bandwidth_resource_code))]),e("th",[t._v("带宽速率")]),e("td",[t._v(t._s(t.data.bandwidth_speed))]),e("th",[t._v("带宽方式")]),e("td",[t._v(t._s(t.data.bandwidth_type))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("子端口")])]),e("tr",[e("td",{staticClass:"colform clearfix",attrs:{colspan:"6"}},[e("label",[t._v("设备编号")]),e("p",{staticClass:"num01"},[t._v(t._s(t.data.port_code))]),e("label",[t._v("子端口号")]),e("p",{staticClass:"num02"},[t._v(t._s(t.data.port_num))]),e("label",[t._v("端口开放程度")]),e("p",{staticClass:"num03"},[t._v(t._s(t.data.port_open))])])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"6"}},[t._v("其它")])]),e("tr",[e("th",[t._v("割接人")]),e("td",[t._v(t._s(t.data.worker_name))]),e("th",[t._v("手机")]),e("td",[t._v(t._s(t.data.worker_mobile))]),e("th",[t._v("邮箱")]),e("td",[t._v(t._s(t.data.worker_email))])]),e("tr",[e("th",[t._v("备注")]),e("td",{staticClass:"remark",attrs:{colspan:"5"}},[t._v(t._s(t.data.desc))])]),e("tr",[e("th",[t._v("派工人")]),e("td",[t._v(t._s(t.data.dispatcher_name))]),e("th",[t._v("希望完工日期")]),e("td",[t._v(t._s(t.data.finish_time))]),e("th",[t._v("派工日期")]),e("td",[t._v(t._s(t.data.dispatch_time))])])])])])]),e("div",{staticClass:"ivu-modal-footer"},[e("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.cancel}},[e("span",[t._v("打印")])])])])},S=[],I=new o["a"],P={props:{isShowModal:{type:Boolean}},components:{},data:function(){return{isShowModal_:this.isShowModal,data:{id_worksheet:0,id_contract:0,contract_code:"",workorder_description:"",contract_type:"",id_client:0,client_name:"",id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",bandwidth_type:0,id_cabinet:0,cabinet_resource_code:"",cabinet_code:"",cabinet_capacity:0,port_code:"",port_num:"",port_open:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:"",finish_time:""}}},methods:{init_idc_view:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id_worksheet "+a),t.next=3,I.workorder("detail",{id_worksheet:a});case 3:e=t.sent,1==e.meta.result?(console.log(e),this.data.id_contract=e.data.id_contract,this.data.contract_code=e.data.contract_code,this.data.workorder_description=e.data.workorder_description,"1"==e.data.cabinet_type.cabinet_type?this.data.contract_type="整柜":this.data.contract_type="容量",this.data.client_name=e.data.name,this.data.id_bandwidth=e.data.id_bandwidth,this.data.bandwidth_resource_code=e.data.bandwidth_resource_code,this.data.bandwidth_speed=e.data.bandwidth_speed,this.data.bandwidth_type=e.data.bandwidth_type,this.data.id_cabinet=e.data.id_cabinet,this.data.cabinet_resource_code=e.data.cabinet_resource_code,this.data.cabinet_code=e.data.cabinet_code,this.data.cabinet_capacity=e.data.cabinet_capacity,this.data.port_code=e.data.port_code,this.data.port_num=e.data.port_num,this.data.port_open=e.data.port_open,this.data.code=e.data.code,this.data.worker_name=e.data.worker_name,this.data.worker_mobile=e.data.worker_mobile,this.data.worker_email=e.data.worker_email,this.data.desc=e.data.worksheet_desc,this.data.dispatcher_id=e.data.dispatcher_id,this.data.dispatcher_name=e.data.dispatcher_name,this.data.dispatch_time=f()(e.data.dispatch_time).format("YYYYMMDD"),this.data.finish_time=f()(e.data.finish_time).format("YYYYMMDD"),this.data.id_worksheet=e.data.id,this.data.worksheet_ip=e.data.worksheet_ip):this.alertError(e.errors[0].abstract_info);case 5:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),outputIp:function(t){var a="";return null==t&&void 0==t||t.forEach(function(t,e){a+=e+1+": "+t.description+"<br>"}),a},cancel:function(){this.clearData(),this.$emit("emit-show-modal",1),this.$emit("emit-init-refresh")},clearData:function(){this.data={id_worksheet:0,id_contract:0,contract_code:"",workorder_description:"",contract_type:"",id_client:0,client_name:"",id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",bandwidth_type:0,id_cabinet:0,cabinet_resource_code:"",cabinet_code:"",cabinet_capacity:0,port_code:"",port_num:"",port_open:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:"",finish_time:""}}},watch:{isShowModal:function(t){var a=this;a.isShowModal_=t}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},M=P,D=Object(y["a"])(M,C,S,!1,null,null,null);D.options.__file="idc_view.vue";var $=D.exports,N=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("modal",{attrs:{width:820,"footer-hide":!0,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(a){t.isShowModal_=a},expression:"isShowModal_"}},[e("div",{staticClass:"layer layerworkorder layer-line"},[e("h2",[t._v("线路施工单")]),e("div",{staticClass:"tableblacktop clearfix"},[e("div",{staticClass:"leftnum"},[e("label",[t._v("销售合同编号：")]),e("span",[t._v(t._s(t.data.contract_code))])]),e("div",{staticClass:"rightnum"},[e("label",[t._v("工单编号：")]),e("span",[t._v(t._s(t.data.code))])]),e("div",{staticClass:"tableblack"},[e("table",[e("tbody",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("客户名称")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.client_name))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("合同服务内容")]),e("td",{attrs:{colspan:"3"}},[e("Select",{model:{value:t.splitContractCicuitList,callback:function(a){t.splitContractCicuitList=a},expression:"splitContractCicuitList"}},t._l(t.contractCicuitList,function(a){return e("Option",{key:a.value,attrs:{value:a.description+"-"+a.type_name+"-"+a.id}},[t._v(t._s(a.description))])}),1)],1),e("th",[t._v("业务类型")]),e("td",[t._v(t._s(t.data.contract_type))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("带宽资源编号")]),e("td",{attrs:{colspan:"3"}},[e("Select",{attrs:{filterable:"",clearable:"","label-in-value":""},on:{"on-query-change":t.bandwidthDropdown,"on-change":t.bandwidthChange}},t._l(t.resourceData.bandwidth_data,function(a,r){return e("Option",{key:r,attrs:{value:a.id}},[t._v(t._s(a.code))])}),1)],1),e("th",[t._v("带宽速率")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.bandwidth_speed,expression:"data.bandwidth_speed"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.bandwidth_speed},on:{input:function(a){a.target.composing||t.$set(t.data,"bandwidth_speed",a.target.value)}}})])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("虚拟端口号")]),e("td",{attrs:{colspan:"3"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.port_virtual,expression:"data.port_virtual"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.port_virtual},on:{input:function(a){a.target.composing||t.$set(t.data,"port_virtual",a.target.value)}}})]),e("th",[t._v("线路编号")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.circuit_code,expression:"data.circuit_code"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.circuit_code},on:{input:function(a){a.target.composing||t.$set(t.data,"circuit_code",a.target.value)}}})])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("线路地址")])]),e("tr",[e("th",{attrs:{rowspan:"4"}},[t._v("甲"),e("br"),t._v("端")]),e("th",[t._v("名称")]),e("td",{attrs:{colspan:"3"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_name,expression:"data.a_name"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_name},on:{input:function(a){a.target.composing||t.$set(t.data,"a_name",a.target.value)}}})]),e("th",[t._v("机房电话")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_cabinet_phone,expression:"data.a_cabinet_phone"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_cabinet_phone},on:{input:function(a){a.target.composing||t.$set(t.data,"a_cabinet_phone",a.target.value)}}})])]),e("tr",[e("th",[t._v("地址")]),e("td",{attrs:{colspan:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_address,expression:"data.a_address"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_address},on:{input:function(a){a.target.composing||t.$set(t.data,"a_address",a.target.value)}}})])]),e("tr",[e("th",[t._v("联系人")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_contact,expression:"data.a_contact"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_contact},on:{input:function(a){a.target.composing||t.$set(t.data,"a_contact",a.target.value)}}})]),e("th",[t._v("电话")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_contact_phone,expression:"data.a_contact_phone"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_contact_phone},on:{input:function(a){a.target.composing||t.$set(t.data,"a_contact_phone",a.target.value)}}})]),e("th",[t._v("传真")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_fax,expression:"data.a_fax"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_fax},on:{input:function(a){a.target.composing||t.$set(t.data,"a_fax",a.target.value)}}})])]),e("tr",[e("th",[t._v("接口标准")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_type_standard,expression:"data.a_type_standard"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_type_standard},on:{input:function(a){a.target.composing||t.$set(t.data,"a_type_standard",a.target.value)}}})]),e("th",[t._v("端口速率")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_port_speed,expression:"data.a_port_speed"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_port_speed},on:{input:function(a){a.target.composing||t.$set(t.data,"a_port_speed",a.target.value)}}})]),e("th",[t._v("光纤编号")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.a_fibre_code,expression:"data.a_fibre_code"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.a_fibre_code},on:{input:function(a){a.target.composing||t.$set(t.data,"a_fibre_code",a.target.value)}}})])]),e("tr",[e("th",{attrs:{rowspan:"4"}},[t._v("乙"),e("br"),t._v("端")]),e("th",[t._v("名称")]),e("td",{attrs:{colspan:"3"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_name,expression:"data.b_name"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_name},on:{input:function(a){a.target.composing||t.$set(t.data,"b_name",a.target.value)}}})]),e("th",[t._v("机房电话")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_cabinet_phone,expression:"data.b_cabinet_phone"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_cabinet_phone},on:{input:function(a){a.target.composing||t.$set(t.data,"b_cabinet_phone",a.target.value)}}})])]),e("tr",[e("th",[t._v("地址")]),e("td",{attrs:{colspan:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_address,expression:"data.b_address"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_address},on:{input:function(a){a.target.composing||t.$set(t.data,"b_address",a.target.value)}}})])]),e("tr",[e("th",[t._v("联系人")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_contact,expression:"data.b_contact"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_contact},on:{input:function(a){a.target.composing||t.$set(t.data,"b_contact",a.target.value)}}})]),e("th",[t._v("电话")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_contact_phone,expression:"data.b_contact_phone"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_contact_phone},on:{input:function(a){a.target.composing||t.$set(t.data,"b_contact_phone",a.target.value)}}})]),e("th",[t._v("传真")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_fax,expression:"data.b_fax"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_fax},on:{input:function(a){a.target.composing||t.$set(t.data,"b_fax",a.target.value)}}})])]),e("tr",[e("th",[t._v("接口标准")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_type_standard,expression:"data.b_type_standard"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_type_standard},on:{input:function(a){a.target.composing||t.$set(t.data,"b_type_standard",a.target.value)}}})]),e("th",[t._v("端口速率")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_port_speed,expression:"data.b_port_speed"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_port_speed},on:{input:function(a){a.target.composing||t.$set(t.data,"b_port_speed",a.target.value)}}})]),e("th",[t._v("光纤编号")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.b_fibre_code,expression:"data.b_fibre_code"}],attrs:{type:"text",value:"",placeholder:"手工填写"},domProps:{value:t.data.b_fibre_code},on:{input:function(a){a.target.composing||t.$set(t.data,"b_fibre_code",a.target.value)}}})])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("IP")])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("IP资源编号")]),e("td",[e("Select",{attrs:{filterable:"",clearable:""},on:{"on-query-change":t.ipDropdown},model:{value:t.splitIpVal,callback:function(a){t.splitIpVal=a},expression:"splitIpVal"}},t._l(t.resourceData.ip_data,function(a,r){return e("Option",{key:r,attrs:{value:a.id+"-"+a.code}},[t._v(t._s(a.code))])}),1)],1),e("th",[t._v("IP地址")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ip_data_detail.ip_address,expression:"ip_data_detail.ip_address"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.ip_data_detail.ip_address},on:{input:function(a){a.target.composing||t.$set(t.ip_data_detail,"ip_address",a.target.value)}}})]),e("th",[t._v("IP数量")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ip_data_detail.ip_num,expression:"ip_data_detail.ip_num"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.ip_data_detail.ip_num},on:{input:function(a){a.target.composing||t.$set(t.ip_data_detail,"ip_num",a.target.value)}}})]),e("td",[e("a",{attrs:{title:"添加"},on:{click:function(a){t.ip_array()}}},[e("i",{staticClass:"text-icon icc-add"})])])]),e("tr",[e("th",[t._v("修正样式")]),t._l(t.ip_data_row,function(a,r){return e("ul",{key:r},[e("li",[t._v(" "+t._s(r)+" - "+t._s(a.description)+"  ")])])})],2),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("其它")])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("割接人")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_name,expression:"data.worker_name"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_name},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_name",a.target.value)}}})]),e("th",[t._v("手机")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_mobile,expression:"data.worker_mobile"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_mobile},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_mobile",a.target.value)}}})]),e("th",[t._v("邮箱")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.worker_email,expression:"data.worker_email"}],attrs:{type:"text",placeholder:"手工填写"},domProps:{value:t.data.worker_email},on:{input:function(a){a.target.composing||t.$set(t.data,"worker_email",a.target.value)}}})])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("备注")]),e("td",{staticClass:"remark",attrs:{colspan:"5"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.desc,expression:"data.desc"}],attrs:{placeholder:"手工填写"},domProps:{value:t.data.desc},on:{input:function(a){a.target.composing||t.$set(t.data,"desc",a.target.value)}}})])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("派工人")]),e("td",[t._v(t._s(t.data.dispatcher_name))]),e("th",[t._v("希望完工日期")]),e("td",[e("div",{staticClass:"date dateorder"},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date","split-panels":"",placeholder:"选择日期",format:"yyyy-MM-dd"},on:{"on-change":function(a){t.data.finish_time=a}},model:{value:t.data.finish_time,callback:function(a){t.$set(t.data,"finish_time",a)},expression:"data.finish_time"}})],1)]),e("th",[t._v("派工日期")]),e("td",[t._v(t._s(t.data.dispatch_time))])])])])])])]),e("div",{staticClass:"ivu-modal-footer"},[e("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.sumbitAdd}},[e("span",[t._v("提交")])])])])},V=[],O=(e("cadf"),e("551c"),e("097d"),new o["a"]),R={props:{isShowModal:{type:Boolean},idContract:{type:Number}},components:{},data:function(){return{isShowModal_:this.isShowModal,idContract_:this.idContract,data:{id_contract:0,contract_code:"",workorder_description:"",contract_circuit_id:0,id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",client_name:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:f()().format("YYYYMMDD"),finish_time:"",port_virtual:"",circuit_code:"",a_name:"",a_cabinet_phone:"",a_address:"",a_contact:"",a_contact_phone:"",a_fax:"",a_type_standard:"",a_port_speed:"",a_fibre_code:"",b_name:"",b_cabinet_phone:"",b_address:"",b_contact:"",b_contact_phone:"",b_fax:"",b_type_standard:"",b_port_speed:"",b_fibre_code:""},resourceData:{ip_data:[],bandwidth_data:[]},splitbandwidthVal:"",splitIpVal:"",ip_data_detail:{id_ip:0,ip_resource_code:"",ip_address:"",ip_num:0},ip_data_row:[],splitContractCicuitList:"",contractCicuitList:[]}},methods:{init_circuit_add:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id_pass circuit"+a),t.next=3,O.workorder("detail_add",{contract_id:a});case 3:return e=t.sent,1==e.meta.result?(console.log(e),this.data.id_contract=e.data.contract.id,this.data.contract_code=e.data.contract.contract_code,this.data.code="Circuit-"+f()().format("YYYYMMDD"),this.data.client_name=e.data.contract.name):this.alertError(e.errors[0].abstract_info),t.next=7,O.auth("get_current_user_info");case 7:return r=t.sent,1==r.meta.result?(this.data.dispatcher_id=r.data.id,this.data.dispatcher_name=r.data.user_name):this.alertError(e.errors[0].abstract_info),t.next=11,O.workorder("detail_add",{contract_id:a});case 11:i=t.sent,1==i.meta.result?(console.log(i.data.circuit),this.contractCicuitList=i.data.circuit):this.alertError(i.errors[0].abstract_info);case 13:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),transferRequestJava:function(){var t={};return t.id_contract=this.data.id_contract,t.contract_code=this.data.contract_code,t.workorder_description=this.data.workorder_description,t.contract_circuit_id=this.data.contract_circuit_id,t.contract_type=this.data.contract_type,t.id_client=this.data.id_client,t.id_bandwidth=this.data.id_bandwidth,t.bandwidth_resource_code=this.data.bandwidth_resource_code,t.bandwidth_speed=this.data.bandwidth_speed,t.code=this.data.code,t.worker_name=this.data.worker_name,t.worker_mobile=this.data.worker_mobile,t.worker_email=this.data.worker_email,t.desc=this.data.desc,t.dispatcher_id=this.data.dispatcher_id,t.dispatcher_name=this.data.dispatcher_name,t.dispatch_time=this.data.dispatch_time,t.finish_time=this.data.finish_time,t.worksheet_ip=this.ip_data_row,t.port_virtual=this.data.port_virtual,t.circuit_code=this.data.circuit_code,t.a_name=this.data.a_name,t.a_cabinet_phone=this.data.a_cabinet_phone,t.a_address=this.data.a_address,t.a_contact=this.data.a_contact,t.a_contact_phone=this.data.a_cabinet_phone,t.a_fax=this.data.a_fax,t.a_type_standard=this.data.a_type_standard,t.a_port_speed=this.data.a_port_speed,t.a_fibre_code=this.data.a_fibre_code,t.b_name=this.data.b_name,t.b_cabinet_phone=this.data.b_cabinet_phone,t.b_address=this.data.b_address,t.b_contact=this.data.b_contact,t.b_contact_phone=this.data.b_cabinet_phone,t.b_fax=this.data.b_fax,t.b_type_standard=this.data.b_type_standard,t.b_port_speed=this.data.b_port_speed,t.b_fibre_code=this.data.b_fibre_code,t.worksheet_type=2,h()(t)},sumbitAdd:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.workorder("add",{worksheet_info:this.transferRequestJava()});case 2:a=t.sent,1==a.meta.result?(this.$Message.info("添加线路工单成功"),this.cancel()):this.alertError(a.errors[0].abstract_info);case 4:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),cancel:function(){this.$emit("emit-show-modal","circuit_add_show"),this.$emit("emit-init-refresh"),this.clearData()},clearData:function(){this.data={id_contract:0,contract_code:"",workorder_description:"",contract_type:"",client_name:"",id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",bandwidth_type:0,code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:f()().format("YYYYMMDD"),finish_time:"",port_virtual:"",circuit_code:"",a_name:"",a_cabinet_phone:"",a_address:"",a_contact:"",a_contact_phone:"",a_fax:"",a_type_standard:"",a_port_speed:"",a_fibre_code:"",b_name:"",b_cabinet_phone:"",b_address:"",b_contact:"",b_contact_phone:"",b_fax:"",b_type_standard:"",b_port_speed:"",b_fibre_code:""},this.ip_data_row=[],this.splitCabinetVal="",this.splitbandwidthVal="",this.splitContractCicuitList="",this.splitIpVal=""},outputServicDesc:function(t){try{for(var a=JSON.parse(t),e="",r=0;r<a.length;r++)e+=a[r]["description"]+"<br>";return e}catch(i){return t}},ipDropdown:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!=a){t.next=4;break}this.resourceData.ip_data=[],t.next=8;break;case 4:return t.next=6,O.resource_ip("dropdown",{key:a,pagerow:15});case 6:e=t.sent,1==e.meta.result&&(this.resourceData.ip_data=e.data);case 8:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),bandwidthDropdown:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("query ",a),""!=a){t.next=5;break}this.resourceData.bandwidth_data=[],t.next=10;break;case 5:return t.next=7,O.resource_bandwidth("dropdown",{key:a,pagerow:15});case 7:e=t.sent,console.log("bandwidth dropdown ",e),1==e.meta.result&&(this.resourceData.bandwidth_data=e.data);case 10:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),bandwidthChange:function(t){var a=this;this.resourceData.bandwidth_data.forEach(function(e){console.log("e",e),e.id==t.value&&(a.data.id_bandwidth=e.id,a.data.bandwidth_resource_code=e.code,a.data.b_name=e.machine_room_name,a.data.b_cabinet_phone=e.machine_room_contact_phone,a.data.b_contact=e.machine_room_contact_name,a.data.b_address=e.machine_room_address,a.data.b_port_speed=e.port_speed,a.data.b_type_standard=e.port_standard)})},ip_array:function(){var t="",a="",e=p()({},this.ip_data_detail);if(e.id_ip||(t="IP 资源编号(id)"),e.ip_resource_code||(t="IP 资源编号(code)"),e.ip_address||(t="IP 地址不能为空"),e.ip_num||(t="IP 数量不能为空"),a="IP 资源编号: "+e.ip_resource_code+"- IP 地址: "+e.ip_address+"- IP 数量: "+e.ip_num,t)return this.$Message.info(t),!1;e.description=a,this.ip_data_row.push(e),this.clearServiceForm()},clearServiceForm:function(){var t=this.ip_data_detail;for(var a in t)t[a]="";this.splitIpVal=""}},computed:{},mounted:function(){},watch:{isShowModal:function(t,a){var e=this;e.isShowModal_=t},idContract:function(t,a){var e=this;e.idContract_=this.newVal},data:{handler:function(t){var a=this;null!=t.finish_time&&void 0!=t.finish_time&&""!=t.finish_time&&(a.data.finish_time=f()(t.finish_time).format("YYYY-MM-DD HH:mm:ss"))},deep:!0,immediate:!0},splitIpVal:{handler:function(t){try{var a=this,e=t.split("-");a.data.ip_id=e[0],a.data.ip_resource_code=e[1],a.ip_data_detail.id_ip=e[0],a.ip_data_detail.ip_resource_code=e[1]}catch(r){return}},immediate:!0},splitContractCicuitList:{handler:function(t){try{var a=this,e=t.split("-");a.data.workorder_description=e[0],a.data.contract_type=e[1],a.data.contract_circuit_id=e[2]}catch(r){return}},immediate:!0},ip_data_row:{handler:function(t){for(var a=0;a<t.length;a++)_()(t[a]).forEach(function(e){console.log(e,t[a][e])})},deeped:!0,immediate:!0}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},E=R,Y=Object(y["a"])(E,N,V,!1,null,null,null);Y.options.__file="circuit_add.vue";var L=Y.exports,A=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Modal",{attrs:{width:820,"footer-hide":!0,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(a){t.isShowModal_=a},expression:"isShowModal_"}},[e("div",{staticClass:"layer layerworkorder layer-line view"},[e("h2",[t._v("线路施工单")]),e("div",{staticClass:"tableblacktop clearfix"},[e("div",{staticClass:"leftnum"},[e("label",[t._v("销售合同编号：")]),e("span",[t._v(t._s(t.data.contract_code))])]),e("div",{staticClass:"rightnum"},[e("label",[t._v("工单编号：")]),e("span",[t._v(t._s(t.data.code))])])]),e("div",{staticClass:"tableblack"},[e("table",[e("tbody",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("客户名称")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.client_name))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("合同服务内容")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.workorder_description))]),e("th",[t._v("业务类型")]),e("td",[t._v(t._s(t.data.contract_type))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("带宽资源编号")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.bandwidth_resource_code))]),e("th",[t._v("带宽速率")]),e("td",[t._v(t._s(t.data.bandwidth_speed))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("虚拟端口号")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.port_virtual))]),e("th",[t._v("线路编号")]),e("td",[t._v(t._s(t.data.circuit_code))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("线路地址")])]),e("tr",[e("th",{attrs:{rowspan:"4"}},[t._v("甲"),e("br"),t._v("端")]),e("th",[t._v("名称")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.a_name))]),e("th",[t._v("机房电话")]),e("td",[t._v(t._s(t.data.a_cabinet_phone))])]),e("tr",[e("th",[t._v("地址")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.a_address))])]),e("tr",[e("th",[t._v("联系人")]),e("td",[t._v(t._s(t.data.a_contact))]),e("th",[t._v("电话")]),e("td",[t._v(t._s(t.data.a_contact_phone))]),e("th",[t._v("传真")]),e("td",[t._v(t._s(t.data.a_fax))])]),e("tr",[e("th",[t._v("接口标准")]),e("td",[t._v(t._s(t.data.a_type_standard))]),e("th",[t._v("端口速率")]),e("td",[t._v(t._s(t.data.a_port_speed))]),e("th",[t._v("光纤编号")]),e("td",[t._v(t._s(t.data.a_fibre_code))])]),e("tr",[e("th",{attrs:{rowspan:"4"}},[t._v("乙"),e("br"),t._v("端")]),e("th",[t._v("名称")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(t.data.b_name))]),e("th",[t._v("机房电话")]),e("td",[t._v(t._s(t.data.b_cabinet_phone))])]),e("tr",[e("th",[t._v("地址")]),e("td",{attrs:{colspan:"5"}},[t._v(t._s(t.data.b_address))])]),e("tr",[e("th",[t._v("联系人")]),e("td",[t._v(t._s(t.data.b_contact))]),e("th",[t._v("电话")]),e("td",[t._v(t._s(t.data.b_contact_phone))]),e("th",[t._v("传真")]),e("td",[t._v(t._s(t.data.b_fax))])]),e("tr",[e("th",[t._v("接口标准")]),e("td",[t._v(t._s(t.data.b_type_standard))]),e("th",[t._v("端口速率")]),e("td",[t._v(t._s(t.data.b_port_speed))]),e("th",[t._v("光纤编号")]),e("td",[t._v(t._s(t.data.b_fibre_code))])]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("IP")])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("IP资源编号")]),e("td",{domProps:{innerHTML:t._s(t.outputIp(t.data.worksheet_ip))}})]),e("tr",{staticClass:"greybg"},[e("th",{attrs:{colspan:"7"}},[t._v("其它")])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("割接人")]),e("td",[t._v(t._s(t.data.worker_name))]),e("th",[t._v("手机")]),e("td",[t._v(t._s(t.data.worker_mobile))]),e("th",[t._v("邮箱")]),e("td",[t._v(t._s(t.data.worker_email))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("备注")]),e("td",{staticClass:"remark",attrs:{colspan:"5"}},[t._v(t._s(t.data.desc))])]),e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("派工人")]),e("td",[t._v(t._s(t.data.dispatcher_name))]),e("th",[t._v("希望完工日期")]),e("td",[t._v(t._s(t.data.finish_time))]),e("th",[t._v("派工日期 ")]),e("td",[t._v(t._s(t.data.dispatch_time)+" ")])])])])])]),e("div",{staticClass:"ivu-modal-footer"},[e("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.cancel}},[e("span",[t._v("打印")])])])])},j=[],T=new o["a"],F={props:{isShowModal:{type:Boolean},id_worksheet:{type:Number}},components:{},data:function(){return{isShowModal_:this.isShowModal,id_worksheet_:this.id_worksheet,data:{id_contract:0,id_worksheet:0,contract_code:"",workorder_description:"",contract_circuit_id:0,id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",client_name:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:"",finish_time:"",port_virtual:"",circuit_code:"",a_name:"",a_cabinet_phone:"",a_address:"",a_contact:"",a_contact_phone:"",a_fax:"",a_type_standard:"",a_port_speed:"",a_fibre_code:"",b_name:"",b_cabinet_phone:"",b_address:"",b_contact:"",b_contact_phone:"",b_fax:"",b_type_standard:"",b_port_speed:"",b_fibre_code:""}}},methods:{init_circuit_view:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.workorder("detail",{id_worksheet:a});case 2:e=t.sent,1==e.meta.result?(console.log(e),this.data.id_worksheet=a,this.data.id_contract=e.data.id_contract,this.data.contract_code=e.data.contract_code,this.data.workorder_description=e.data.workorder_description,this.data.id_bandwidth=e.data.id_bandwidth,this.data.bandwidth_resource_code=e.data.bandwidth_resource_code,this.data.bandwidth_speed=e.data.bandwidth_speed,this.data.client_name=e.data.name,this.data.code=e.data.code,this.data.worker_name=e.data.worker_name,this.data.worker_mobile=e.data.worker_mobile,this.data.worker_email=e.data.worker_email,this.data.desc=e.data.worksheet_desc,this.data.dispatcher_id=e.data.dispatcher_id,this.data.dispatcher_name=e.data.dispatcher_name,this.data.dispatch_time=f()(e.data.dispatch_time).format("YYYYMMDD"),this.data.finish_time=f()(e.data.finish_time).format("YYYYMMDD"),this.data.port_virtual=e.data.port_virtual,this.data.circuit_code=e.data.circuit_code,this.data.a_name=e.data.a_name,this.data.a_cabinet_phone=e.data.a_cabinet_phone,this.data.a_address=e.data.a_address,this.data.a_contact=e.data.a_contact,this.data.a_contact_phone=e.data.a_contact_phone,this.data.a_fax=e.data.a_fax,this.data.a_type_standard=e.data.a_type_standard,this.data.a_port_speed=e.data.a_port_speed,this.data.a_fibre_code=e.data.a_fibre_code,this.data.b_name=e.data.b_name,this.data.b_cabinet_phone=e.data.b_cabinet_phone,this.data.b_address=e.data.b_address,this.data.b_contact=e.data.b_contact,this.data.b_contact_phone=e.data.b_contact_phone,this.data.b_fax=e.data.b_fax,this.data.b_type_standard=e.data.b_type_standard,this.data.b_port_speed=e.data.b_port_speed,this.data.b_fibre_code=e.data.b_fibre_code,this.data.contract_type=e.data.circuit_type.name,this.data.worksheet_ip=e.data.worksheet_ip):this.alertError(e.errors[0].abstract_info);case 4:case"end":return t.stop()}},t,this)}));function a(a){return t.apply(this,arguments)}return a}(),outputIp:function(t){var a="";return null==t&&void 0==t||t.forEach(function(t,e){a+=e+1+": "+t.description+"<br>"}),a},cancel:function(){this.$emit("emitShowView",2),this.$emit("emit-init-refresh"),this.data={id_contract:0,contract_code:"",workorder_description:"",contract_circuit_id:0,id_bandwidth:0,bandwidth_resource_code:"",bandwidth_speed:"",client_name:"",code:"",worker_name:"",worker_mobile:"",worker_email:"",desc:"",dispatcher_id:"",dispatcher_name:"",dispatch_time:"",finish_time:"",port_virtual:"",circuit_code:"",a_name:"",a_cabinet_phone:"",a_address:"",a_contact:"",a_contact_phone:"",a_fax:"",a_type_standard:"",a_port_speed:"",a_fibre_code:"",b_name:"",b_cabinet_phone:"",b_address:"",b_contact:"",b_contact_phone:"",b_fax:"",b_type_standard:"",b_port_speed:"",b_fibre_code:""}}},watch:{isShowModal:function(t,a){var e=this;e.isShowModal_=t},id_worksheet:function(t,a){}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},H=F,J=Object(y["a"])(H,A,j,!1,null,null,null);J.options.__file="circuit_view.vue";var q=J.exports,G=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Modal",{attrs:{width:420,"footer-hide":!0,"mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.isShowModal_,callback:function(a){t.isShowModal_=a},expression:"isShowModal_"}},[e("div",{staticClass:"layer layer-completeregister"},[e("div",{staticClass:"formlist"},[e("ul",{staticClass:"clearfix"},[e("li",{staticClass:"clearfix"},[e("label",[t._v("用户签字附件：")]),e("a",{staticClass:"upload",attrs:{title:"浏览文件"}}),e("input",{ref:"clearInputFile",attrs:{type:"file"},on:{change:t.getFile}})]),e("li",{staticClass:"clearfix"},[e("label",[t._v("完成时间：")]),e("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date","split-panels":"",placeholder:"Select date",format:"yyyy-MM-dd"},on:{"on-change":function(a){t.doneInfo.real_finish_time=a}},model:{value:t.doneInfo.real_finish_time,callback:function(a){t.$set(t.doneInfo,"real_finish_time",a)},expression:"doneInfo.real_finish_time"}})],1),e("li",{staticClass:"clearfix"},[e("label",[t._v("备注：")]),e("Input",{attrs:{type:"textarea",placeholder:""},model:{value:t.doneInfo.real_finish_remark,callback:function(a){t.$set(t.doneInfo,"real_finish_remark",a)},expression:"doneInfo.real_finish_remark"}})],1)])])]),e("div",{staticClass:"ivu-modal-footer"},[e("button",{staticClass:"ivu-btn ivu-btn-text ivu-btn-large",attrs:{type:"button"},on:{click:t.cancel}},[e("span",[t._v("取消")])]),e("button",{staticClass:"ivu-btn ivu-btn-primary ivu-btn-large",attrs:{type:"button"},on:{click:t.sumbitUpdate}},[e("span",[t._v("提交")])])])])},B=[],U=e("75fc"),z=new o["a"],W={props:{isShowModal:{type:Boolean},idWorksheet:{type:Number}},components:{},data:function(){return{isShowModal_:this.isShowModal,id_worksheet_:this.idWorksheet,doneInfo:{finish_doc:[],real_finish_time:"",real_finish_remark:""}}},methods:{sumbitUpdate:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.workorder("finish",this.getUpdateSumbitItem());case 2:a=t.sent,console.log(this.getUpdateSumbitItem()),1==a.meta.result?(this.$Message.info("更新工单状态至完成成功"),this.cancel()):this.alertError(a.errors[0].abstract_info);case 5:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),cancel:function(){this.$emit("emit-show-modal","order_done_show"),this.$emit("emit-init-refresh"),this.clearData()},clearData:function(){this.$refs.clearInputFile.value="",this.doneInfo={finish_doc:[],real_finish_time:"",real_finish_remark:""}},getFile:function(t){console.log("e",t),this.doneInfo.finish_doc=Object(U["a"])(event.target.files)},getUpdateSumbitItem:function(){return{id_worksheet:this.id_worksheet_,finish_doc:this.doneInfo.finish_doc,real_finish_time:f()(this.doneInfo.real_finish_time).format("YYYY-MM-DD HH:mm:ss"),real_finish_remark:this.doneInfo.real_finish_remark}}},watch:{isShowModal:function(t,a){var e=this;e.isShowModal_=t},idWorksheet:function(t,a){var e=this;e.id_worksheet_=t}}},X=W,K=Object(y["a"])(X,G,B,!1,null,null,null);K.options.__file="orderdone.vue";var Q=K.exports,Z=new o["a"],tt={components:{idcAdd:x,idcView:$,circuitAdd:L,circuitView:q,orderDone:Q},data:function(){return{list_worksheet:[],list_desc:[],listCount:0,searchItem:{client_name:"",contract_code:"",type_desc:"",circuit_code:"",workorder_code:"",pagerow:this.$store.state.pagination.pagerow,pageno:this.$store.state.pagination.pageno},modalShow:{isShowIdcAdd:!1,isShowIdcView:!1,isShowCircuitAdd:!1,isShowCircuitView:!1,isShowOrderdone:!1},modalViewPass:{id_worksheet:0,id_contract:0}}},methods:{init:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Z.workorder("select",this.getSearchItem());case 2:a=t.sent,1==a.meta.result?(this.list_worksheet=a.data,this.listCount=a.meta.total):this.alertError(a.errors[0].abstract_info);case 4:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),submitSearch:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),getSearchItem:function(){return{pageno:this.searchItem.pageno,pagerow:this.searchItem.pagerow,client_project_name:this.searchItem.client_name,contract_code:this.searchItem.contract_code,worksheet_type:this.searchItem.type_desc,circuit_num:this.searchItem.circuit_code,code:this.searchItem.workorder_code}},worksheetControll:function(t){if(null!=t){var a=JSON.parse(t);return a}},showView:function(t,a){switch(t){case"circuit_add_show":this.modalShow.isShowCircuitAdd=!this.modalShow.isShowCircuitAdd,this.modalViewPass.id_contract=a;break;case 2:this.modalShow.isShowCircuitView=!this.modalShow.isShowCircuitView,this.modalViewPass.id_worksheet_pass=a;break;case"idc_add_show":this.modalShow.isShowIdcAdd=!this.modalShow.isShowIdcAdd,this.modalViewPass.id_contract=a;break;case 1:this.modalShow.isShowIdcView=!this.modalShow.isShowIdcView,this.modalViewPass.id_worksheet_pass=a;break;case"order_done_show":this.modalShow.isShowOrderdone=!this.modalShow.isShowOrderdone,this.modalViewPass.id_worksheet_pass=a;break;default:break}},refForm:function(t,a){switch(this.showView(t,a),t){case"circuit_add_show":this.$refs.formCircuitAdd.init_circuit_add(a);break;case 2:this.$refs.formCircuitShow.init_circuit_view(a);break;case"idc_add_show":this.$refs.formIdcAdd.init_idc_add(a);break;case 1:this.$refs.formIdcView.init_idc_view(a);break;default:break}},outputServicDesc:function(t){try{var a=JSON.parse(t),e="";return a.forEach(function(t){e+=t["description"]+"<br>"}),e}catch(r){return t}},outputBuyContractCode:function(t){var a="";return t.forEach(function(t){a+=t["code"]+" "}),a},pageSizeChange:function(t){this.searchItem.pagerow=t,this.init()}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()},at=tt,et=Object(y["a"])(at,r,i,!1,null,null,null);et.options.__file="workorder.vue";a["default"]=et.exports},c5f6:function(t,a,e){"use strict";var r=e("7726"),i=e("69a8"),n=e("2d95"),o=e("5dbc"),s=e("6a99"),d=e("79e5"),c=e("9093").f,_=e("11e9").f,l=e("86cc").f,p=e("aa77").trim,u="Number",h=r[u],m=h,v=h.prototype,f=n(e("2aeb")(v))==u,b="trim"in String.prototype,w=function(t){var a=s(t,!1);if("string"==typeof a&&a.length>2){a=b?a.trim():p(a,3);var e,r,i,n=a.charCodeAt(0);if(43===n||45===n){if(e=a.charCodeAt(2),88===e||120===e)return NaN}else if(48===n){switch(a.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+a}for(var o,d=a.slice(2),c=0,_=d.length;c<_;c++)if(o=d.charCodeAt(c),o<48||o>i)return NaN;return parseInt(d,r)}}return+a};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof h&&(f?d(function(){v.valueOf.call(e)}):n(e)!=u)?o(new m(w(a)),e,h):w(a)};for(var g,y=e("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;y.length>k;k++)i(m,g=y[k])&&!i(h,g)&&l(h,g,_(m,g));h.prototype=v,v.constructor=h,e("2aba")(r,u,h)}},c8bb:function(t,a,e){t.exports=e("54a1")},ce7e:function(t,a,e){var r=e("63b6"),i=e("584a"),n=e("294c");t.exports=function(t,a){var e=(i.Object||{})[t]||Object[t],o={};o[t]=a(e),r(r.S+r.F*n(function(){e(1)}),"Object",o)}},d2d5:function(t,a,e){e("1654"),e("549b"),t.exports=e("584a").Array.from},f499:function(t,a,e){t.exports=e("a21f")},fdef:function(t,a){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);