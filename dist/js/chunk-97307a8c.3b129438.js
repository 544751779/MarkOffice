(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97307a8c"],{"0a0d":function(e,t,a){e.exports=a("e829")},"2f37":function(e,t,a){var o=a("63b6");o(o.S,"Date",{now:function(){return(new Date).getTime()}})},a0df:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"合同信息",width:672,"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.isShowModal_,callback:function(t){e.isShowModal_=t},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-contractinfo"},[a("div",{staticClass:"formlist"},[a("ul",{staticClass:"clearfix"},[a("li",[a("label",[e._v("合同类型：")]),a("span",{staticClass:"txt"},[e._v(e._s(e.row.contract_type_name))])]),a("li",[a("label",[e._v("合同编号：")]),a("span",{staticClass:"txt"},[e._v(e._s(e.row.contract_code))])]),a("li",[a("label",{domProps:{innerHTML:e._s(1==e.row.sell_or_buy?"销售员：":"采购员：")}}),a("span",{staticClass:"txt"},[e._v(e._s(e.row.user_name))])]),a("li",[a("label",[e._v("项目名称：")]),a("span",{staticClass:"txt"},[e._v(e._s(e.row.project_name))])]),1==e.row.sell_or_buy?a("li",[a("label",[e._v("客户名称： ")]),a("span",{staticClass:"txt"},[e._v(e._s(e.row.client_name))])]):e._e(),2==e.row.sell_or_buy?a("li",[a("label",[e._v("供应商名称： ")]),a("span",{staticClass:"txt"},[e._v(e._s(e.row.supplier_name))])]):e._e(),e.row.paper_doc?a("li",[a("label",[e._v("纸质合同收到时间：")]),a("span",{staticClass:"txt"},[e._v(e._s(e.dataFormat(e.row.paper_doc_recv_time)))])]):e._e(),e.row.paper_doc?a("li",[a("label",[e._v("合同签订日期：")]),a("span",{staticClass:"txt"},[e._v(e._s(e.dataFormat(e.row.paper_doc_sign_time)))])]):e._e()]),a("div",{staticClass:"form clearfix"},[a("label",[e._v("合同服务内容：")]),a("div",{staticClass:"cnt ",domProps:{innerHTML:e._s(e.toLine(e.row.service_desc))}})]),a("div",{staticClass:"form clearfix"},[a("label",[e._v("付款方式：")]),a("div",{staticClass:"cnt",domProps:{innerHTML:e._s(e.toLine(e.row.payment_desc))}})]),1==e.row.sell_or_buy?a("div",{staticClass:"form clearfix"},[a("label",[e._v("佣金：")]),a("div",{staticClass:"cnt"},[e._v("\r\n                    "+e._s(e.row.commission_desc)+"\r\n                ")])]):e._e(),a("p",{staticClass:"form clearfix"},[a("label",[e._v("有效期：")]),a("span",{staticClass:"txt"},[e._v("  "+e._s(e.dataFormat(e.row.expire_time))+" ")])]),a("p",{staticClass:"form clearfix"},[a("label",[e._v("电子文件：")]),a("span",{staticClass:"txt"},[a("a",{attrs:{href:e.row.electron_doc_fullpath,target:"_blank"}},[e._v("   "+e._s(e.row.electron_doc)+" ")])])]),e.row.paper_doc?a("p",{staticClass:"form clearfix"},[a("label",[e._v("纸质合同：")]),a("span",{staticClass:"txt"},[a("a",{attrs:{href:e.row.paper_doc_fullpath,target:"_blank"}},[e._v("   "+e._s(e.row.paper_doc)+" ")])])]):e._e()])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("确定")])],1)])},i=[],n=(a("96cf"),a("3b8d")),s=(a("cadf"),a("551c"),a("097d"),a("494c")),r=new s["a"],c={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,row:{}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"contract_detail"})},toLine:function(e){try{for(var t=JSON.parse(e),a="",o=0;o<t.length;o++)a+=t[o]["description"]+"<br>";return a}catch(i){return e}},init:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(-1==this.map.id||!this.isShowModal_){e.next=6;break}return console.log(this.map),e.next=4,r.contract("detail",{id:this.map.id});case 4:t=e.sent,1==t.meta.result?this.row=t.data:this.alertError(t.errors[0].abstract_info);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(e,t){this.init()},deep:!0}}},l=c,u=a("2877"),_=Object(u["a"])(l,o,i,!1,null,null,null);_.options.__file="contract_detail.vue";t["a"]=_.exports},b5ba:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix",attrs:{id:"main"}},[a("div",{staticClass:"containarea"},[a("h2",{staticClass:"commontit"},[e._v(e._s(e.$store.state.pageInfo.crumbName))]),a("div",{staticClass:"container"},[a("div",{staticClass:"tabletop clearfix"},[a("div",{staticClass:"search gathermag clearfix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectItem.payer_name,expression:"selectItem.payer_name"}],staticClass:"formtxt w5",attrs:{type:"text",placeholder:"输入客户名称"},domProps:{value:e.selectItem.payer_name},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"payer_name",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectItem.project_name,expression:"selectItem.project_name"}],staticClass:"formtxt w5",attrs:{type:"text",placeholder:"输入项目名称"},domProps:{value:e.selectItem.project_name},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"project_name",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectItem.contract_code,expression:"selectItem.contract_code"}],staticClass:"formtxt w3",attrs:{type:"text",placeholder:"输入合同编号"},domProps:{value:e.selectItem.contract_code},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"contract_code",t.target.value)}}}),a("div",{staticClass:"daterange"},[a("DatePicker",{attrs:{"split-panels":"",value:[e.selectItem.collect_time_start,e.selectItem.collect_time_end],type:"daterange",placeholder:"选择日期"},on:{"on-change":e.dateChange}})],1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectItem.invoice_num,expression:"selectItem.invoice_num"}],staticClass:"formtxt w3",attrs:{type:"text",placeholder:"输入发票编号"},domProps:{value:e.selectItem.invoice_num},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"invoice_num",t.target.value)}}}),a("div",{staticClass:"select select-pay"},[a("Select",{attrs:{placeholder:"选择到账/未到账"},model:{value:e.selectItem.invoice_num,callback:function(t){e.$set(e.selectItem,"invoice_num",t)},expression:"selectItem.invoice_num"}},[a("Option",{attrs:{value:"1"}},[e._v("已付")]),a("Option",{attrs:{value:"0"}},[e._v("未付")]),a("Option",{attrs:{value:"99"}},[e._v("已经付完")])],1)],1),a("div",{staticClass:"select select-ticket"},[a("Select",{attrs:{placeholder:"选择有无发票"},model:{value:e.selectItem.invoice_status,callback:function(t){e.$set(e.selectItem,"invoice_status",t)},expression:"selectItem.invoice_status"}},[a("Option",{attrs:{value:"1"}},[e._v("有")]),a("Option",{attrs:{value:"0"}},[e._v("没有")])],1)],1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectItem.user_name,expression:"selectItem.user_name"}],staticClass:"formtxt w3",attrs:{type:"text",placeholder:"输入销售员"},domProps:{value:e.selectItem.user_name},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"user_name",t.target.value)}}}),a("a",{staticClass:"btn",on:{click:e.init}},[e._v("搜索")])])]),a("div",{staticClass:"tablecommondiv"},[a("table",{staticClass:"tablecommon table-gathermanage"},[e._m(0),a("tbody",e._l(e.list,function(t,o){return a("tr",{key:o},[a("td",[a("a",{on:{click:function(a){e.showContractDetail(t.contract_id)}}},[e._v("  "+e._s(t.contract_code))])]),a("td",[e._v(e._s(t.user_name))]),a("td",[e._v(e._s(t.project_name))]),a("td",[e._v(e._s(t.name_payer))]),a("td",e._l(e.dic.pay_type,function(o,i){return o.id==t.pay_type?a("span",{key:i,domProps:{innerHTML:e._s(o.name)}}):e._e()}),0),a("td",[e._v("\r\n                                始："+e._s(e.dataFormat(t.collect_start))+"\r\n                                "),t.collect_end<4070914352e3?[a("br"),e._v("止："+e._s(e.dataFormat(t.collect_end))+"\r\n                                ")]:e._e()],2),a("td",[e._v(e._s(t.amount))]),a("td",[e._v(e._s(t.amount_invoice))]),a("td",{domProps:{innerHTML:e._s(e.toLine(t.invoice_dates,"invoice_dates"))}}),a("td",{domProps:{innerHTML:e._s(e.toLine(t.invoice_nums,"invoice_nums"))}}),a("td",[e._v(e._s(t.amount_collected))]),a("td",{domProps:{innerHTML:e._s(e.toLine(t.collect_dates,"collect_date"))}}),a("td",["1"==t.action_regist?a("a",{staticClass:"alink",on:{click:function(a){e.show_collect_regist(t.id)}}},[e._v("收款登记")]):e._e(),"1"==t.action_invoice?a("a",{staticClass:"alink",on:{click:function(a){e.fpdj(t.id)}}},[e._v("发票登记")]):e._e(),"1"==t.action_re_invoice?a("a",{staticClass:"alink",on:{click:function(a){e.fpbd(t.id)}}},[e._v("发票补登")]):e._e()]),a("td",{domProps:{innerHTML:e._s(e.toLine(t.voucher_comment,"bz"))}})])}),0)])]),a("div",{staticClass:"tablebottom"},[a("div",{staticClass:"pagewrap"},[a("Page",{attrs:{total:e.listCount,"show-sizer":"","page-size":e.pagination.pagerow,"show-total":"","show-elevator":"",current:e.pagination.pageno},on:{"update:pageSize":function(t){e.$set(e.pagination,"pagerow",t)},"update:current":function(t){e.$set(e.pagination,"pageno",t)},"on-change":e.init,"on-page-size-change":e.pageSizeChange}})],1)])])]),a("contractDetail",{attrs:{isShowModal:e.contract_detail.show,map:e.contract_detail.map},on:{emitComponents:e.emitComponents}}),a("collectRegist",{attrs:{isShowModal:e.collect_regist.show,map:e.collect_regist.map},on:{emitComponents:e.emitComponents}}),a("collectInvoice",{attrs:{isShowModal:e.collect_invoice.show,map:e.collect_invoice.map},on:{emitComponents:e.emitComponents}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("合同编号")]),a("th",[e._v("销售员")]),a("th",[e._v("项目名称")]),a("th",[e._v("客户名称")]),a("th",[e._v("付款方式")]),a("th",[e._v("计费日期")]),a("th",[e._v("应收金额")]),a("th",[e._v("开票金额")]),a("th",[e._v("开票日期")]),a("th",[e._v("发票号")]),a("th",[e._v("到账金额")]),a("th",[e._v("到账日期")]),a("th",[e._v("经办")]),a("th",[e._v("备注/付款凭证")])])])}],n=(a("7f7f"),a("96cf"),a("3b8d")),s=a("0a0d"),r=a.n(s),c=a("494c"),l=a("a0df"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"收款登记",width:380,"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.isShowModal_,callback:function(t){e.isShowModal_=t},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-gatheringregister"},[a("div",{staticClass:"formlist"},[a("ul",{staticClass:"clearfix"},[a("li",[a("label",[e._v("收款金额：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.amount,expression:"row.amount"}],attrs:{type:"text"},domProps:{value:e.row.amount},on:{input:function(t){t.target.composing||e.$set(e.row,"amount",t.target.value)}}})]),a("li",[a("label",[e._v("到账日期：")]),a("div",{staticClass:"date dateaccount"},[a("DatePicker",{attrs:{type:"date",format:"yyyy-MM-dd"},on:{"on-change":function(t){return e.row.collect_date=t}}})],1)]),a("li",[a("label",[e._v("付款凭证：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.collect_voucher,expression:"row.collect_voucher"}],attrs:{type:"text"},domProps:{value:e.row.collect_voucher},on:{input:function(t){t.target.composing||e.$set(e.row,"collect_voucher",t.target.value)}}})]),a("li",[a("label",[e._v("备注：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.comments,expression:"row.comments"}],attrs:{type:"text"},domProps:{value:e.row.comments},on:{input:function(t){t.target.composing||e.$set(e.row,"comments",t.target.value)}}})]),a("li",[a("div",{staticClass:"checkbox"},[a("Checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.row.collect_status,callback:function(t){e.$set(e.row,"collect_status",t)},expression:"row.collect_status"}},[e._v("本计费周期款项已结清")])],1)])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)])},_=[],m=new c["a"],p={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,row:{amount:"",collect_date:"",collect_status:"0",collect_voucher:"",comments:"",id_collect:""}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"collect_regist"})},init:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.row={amount:"",collect_date:"",collect_status:"0",collect_voucher:"",comments:"",id_collect:""};case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),transformRequest:function(){return this.row.amount?this.row.collect_date?this.row.collect_voucher?this.row:(this.$Message.info("收款凭证不能为空"),!1):(this.$Message.info("日期不能为空"),!1):(this.$Message.info("收款金额不能为空"),!1)},submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.transformRequest(),!t){e.next=7;break}return t.id_collect=this.map.id,e.next=5,m.collect("regist",t);case 5:a=e.sent,1==a.meta.result?(this.$Message.info("操作成功"),this.init(),this.cancel()):this.alertError(a.errors[0].abstract_info);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(e,t){this.init()},deep:!0}}},d=p,v=a("2877"),h=Object(v["a"])(d,u,_,!1,null,null,null);h.options.__file="collect_regist.vue";var w=h.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:e.map.title,width:680,"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.isShowModal_,callback:function(t){e.isShowModal_=t},expression:"isShowModal_"}},[a("div",{staticClass:"layer layer-invoicesupplement"},[a("div",{staticClass:"formlist"},[a("ul",{staticClass:"clearfix"},[a("li",[a("label",[e._v("合同编号：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.contract_code,expression:"row.contract_code"}],attrs:{type:"text",placeholder:"自动读取",disabled:"disabled"},domProps:{value:e.row.contract_code},on:{input:function(t){t.target.composing||e.$set(e.row,"contract_code",t.target.value)}}})]),a("li",[a("label",[e._v("发票抬头：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.invoice_title,expression:"row.invoice_title"}],attrs:{type:"text",placeholder:"自动读取"},domProps:{value:e.row.invoice_title},on:{input:function(t){t.target.composing||e.$set(e.row,"invoice_title",t.target.value)}}})]),a("li",[a("label",[e._v("发票号码：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.invoice_num,expression:"row.invoice_num"}],attrs:{type:"text"},domProps:{value:e.row.invoice_num},on:{input:function(t){t.target.composing||e.$set(e.row,"invoice_num",t.target.value)}}})]),a("li",[a("label",[e._v("发票金额：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.invoice_amount,expression:"row.invoice_amount"}],attrs:{type:"text"},domProps:{value:e.row.invoice_amount},on:{input:function(t){t.target.composing||e.$set(e.row,"invoice_amount",t.target.value)}}})]),a("li",[a("label",[e._v("开票时间：")]),a("div",{staticClass:"date dateopen"},[a("DatePicker",{attrs:{type:"date",value:e.row.invoice_date,format:"yyyy-MM-dd"},on:{"on-change":function(t){return e.row.invoice_date=t}}})],1)]),a("li",[a("label",[e._v("开票内容：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.invoice_content,expression:"row.invoice_content"}],attrs:{type:"text",placeholder:"自动读取"},domProps:{value:e.row.invoice_content},on:{input:function(t){t.target.composing||e.$set(e.row,"invoice_content",t.target.value)}}})]),a("li",[a("label",[e._v("发票经办人：")]),a("div",{staticClass:"select select-ticket01"},[a("Select",{attrs:{filterable:"",clearable:"","label-in-value":""},on:{"on-query-change":e.user_dropdown,"on-change":e.user_change}},e._l(e.dic.user,function(t,o){return a("Option",{key:o,attrs:{value:t.id}},[e._v(e._s(t.user_name))])}),1)],1)]),a("li",[a("label",[e._v("开票人：")]),a("div",{staticClass:"select select-ticket02"},[a("Select",{attrs:{filterable:"",clearable:"","label-in-value":""},on:{"on-query-change":e.user_dropdown_kp,"on-change":e.user_change_kp}},e._l(e.dic.user_kp,function(t,o){return a("Option",{key:o,attrs:{value:t.id}},[e._v(e._s(t.user_name))])}),1)],1)]),a("li",[a("label",[e._v("快递公司：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.express_name,expression:"row.express_name"}],attrs:{type:"text"},domProps:{value:e.row.express_name},on:{input:function(t){t.target.composing||e.$set(e.row,"express_name",t.target.value)}}})]),a("li",[a("label",[e._v("快递单号：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.express_num,expression:"row.express_num"}],attrs:{type:"text"},domProps:{value:e.row.express_num},on:{input:function(t){t.target.composing||e.$set(e.row,"express_num",t.target.value)}}})]),a("li",[a("label",[e._v("寄件时间：")]),a("div",{staticClass:"date datemail"},[a("DatePicker",{attrs:{type:"date",value:e.row.express_date,format:"yyyy-MM-dd"},on:{"on-change":function(t){return e.row.express_date=t}}})],1)]),a("li",[a("label",[e._v("备注：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.comments,expression:"row.comments"}],attrs:{type:"text"},domProps:{value:e.row.comments},on:{input:function(t){t.target.composing||e.$set(e.row,"comments",t.target.value)}}})])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)])},g=[],b=new c["a"],x={props:{map:{type:Object},isShowModal:{type:Boolean}},data:function(){return{isShowModal_:this.isShowModal,id:this.map.id,dic:{user:[],user_kp:[]},row:{comments:"",express_date:"",express_name:"",express_num:"",id_collect:"",invoice_amount:"",invoice_content:"",invoice_create_user_id:"",invoice_create_user_name:"",invoice_date:"",invoice_num:"",invoice_process_user_id:"",invoice_process_user_name:"",invoice_title:""}}},methods:{cancel:function(){this.isShowModal_=!1,this.$emit("emitComponents",{show:this.isShowModal_,name:"collect_invoice"})},init:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.row={comments:"",express_date:"",express_name:"",express_num:"",id_collect:"",invoice_amount:"",invoice_content:"",invoice_create_user_id:"",invoice_create_user_name:"",invoice_date:"",invoice_num:"",invoice_process_user_id:"",invoice_process_user_name:"",invoice_title:"",is_reset:this.map.is_reset},!(this.isShowModal_&&this.map.id>-1)){e.next=6;break}return e.next=4,b.collect("detail",{id_collect:this.map.id});case 4:t=e.sent,1==t.meta.result?(this.row.contract_code=t.data.contract_code,this.row.invoice_title=t.data.name_payer,this.row.invoice_content=t.data.content_invoice):this.alertError(t.errors[0].abstract_info);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),transformRequest:function(){return this.row},user_dropdown:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t){e.next=4;break}this.dic.user=[],e.next=8;break;case 4:return e.next=6,this.ajax.user("dropdown",{pagerow:15,txt:t});case 6:a=e.sent,this.dic.user=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),user_dropdown_kp:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t){e.next=4;break}this.dic.user=[],e.next=8;break;case 4:return e.next=6,this.ajax.user("dropdown",{pagerow:15,txt:t});case 6:a=e.sent,this.dic.user_kp=a.data;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),user_change:function(e){this.row.invoice_process_user_id=e.value,this.row.invoice_process_user_name=e.label},user_change_kp:function(e){this.row.invoice_create_user_id=e.value,this.row.invoice_create_user_name=e.label},submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.transformRequest(),!t){e.next=7;break}return t.id_collect=this.map.id,e.next=5,b.collect("add_invoice",t);case 5:a=e.sent,1==a.meta.result?(this.$Message.info("操作成功"),this.init(),this.cancel()):this.alertError(a.errors[0].abstract_info);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{isShowModal:function(){this.isShowModal_=this.isShowModal},map:{handler:function(e,t){this.init()},deep:!0}}},y=x,C=Object(v["a"])(y,f,g,!1,null,null,null);C.options.__file="collect_invoice.vue";var k=C.exports,M=new c["a"],S={components:{contractDetail:l["a"],collectRegist:w,collectInvoice:k},data:function(){return{list:[],listCount:0,pagination:{pagerow:this.$store.state.pagination.pagerow,pageno:this.$store.state.pagination.pageno},contract_detail:{show:!1,map:{id:-1}},collect_regist:{show:!1,map:{id:-1}},collect_invoice:{show:!1,map:{id:-1}},selectItem:{collect_status:"-1",collect_time_end:this.util.getNow(-30),collect_time_start:this.util.getNow(30),contract_code:"",contract_id:"-1",invoice_num:"",invoice_status:"-1",pageno:"",pagerow:"",payer_name:"",project_name:"",user_name:""},dic:{pay_type:this.$store.state.pay_type},dataOption:{disabledDate:function(e,t){return e&&e.valueOf()>r()()}}}},methods:{init:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.collect("select",this.getSelectItem());case 2:t=e.sent,1==t.meta.result?(this.list=t.data,this.listCount=t.meta.total):this.alertError(t.errors[0].abstract_info);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),dateChange:function(e){this.selectItem.collect_time_start=e[0],this.selectItem.collect_time_end=e[1]},pageSizeChange:function(e){this.pagination.pagerow=e,this.init()},toLine:function(e,t){try{var a=JSON.parse(e),o="";switch(t||(t="description"),t){case"description":for(var i=0;i<a.length;i++)o+=a[i]["description"]+"<br>";break;case"collect_date":for(var n=0;n<a.length;n++)o+=a[n]["collect_date"]+"<br>";break;case"bz":for(var s=0;s<a.length;s++)o+=a[s]["comments"]+"/"+a[s]["collect_voucher"]+"<br>";break;case"invoice_dates":for(var r=0;r<a.length;r++)o+=a[r]["invoice_dates"]+"<br>";break;case"invoice_nums":for(var c=0;c<a.length;c++)o+=a[c]["invoice_num"]+"<br>";break;default:break}return o}catch(t){return e}},getSelectItem:function(){return this.selectItem.pageno=this.pagination.pageno,this.selectItem.pagerow=this.pagination.pagerow,this.selectItem},showContractDetail:function(e){this.contract_detail.show=!0,this.contract_detail.map.id=e},show_collect_regist:function(e){this.collect_regist.show=!0,this.collect_regist.map.id=e},fpdj:function(e){this.collect_invoice.show=!0,this.collect_invoice.map.id=e,this.collect_invoice.map.title="发票及经办信息登记",this.collect_invoice.map.is_reset=0},fpbd:function(e){this.collect_invoice.show=!0,this.collect_invoice.map.title="发票补登",this.collect_invoice.map.id=e,this.collect_invoice.map.is_reset=1},emitComponents:function(e){switch(e.name){case"contract_detail":this.contract_detail.show=!1,this.contract_detail.map.id=-1;break;case"collect_regist":this.collect_regist.show=!1,this.collect_regist.map.id=-1;break;case"collect_invoice":this.collect_invoice.show=!1,this.collect_invoice.map.id=-1;break}this.init()}},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},I=S,$=Object(v["a"])(I,o,i,!1,null,null,null);$.options.__file="collect.vue";t["default"]=$.exports},e829:function(e,t,a){a("2f37"),e.exports=a("584a").Date.now}}]);